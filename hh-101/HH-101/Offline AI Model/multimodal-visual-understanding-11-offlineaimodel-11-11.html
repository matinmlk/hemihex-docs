<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-hh101 docs-version-current docs-doc-page docs-doc-id-HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Multimodal Visual Understanding Application | HemiHex Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.hemihex.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://docs.hemihex.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://docs.hemihex.com/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-hh101-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-hh101-current"><meta data-rh="true" property="og:title" content="Multimodal Visual Understanding Application | HemiHex Docs"><meta data-rh="true" name="description" content="1. Concept Introduction"><meta data-rh="true" property="og:description" content="1. Concept Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.hemihex.com/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11"><link data-rh="true" rel="alternate" href="https://docs.hemihex.com/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.hemihex.com/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Multimodal Visual Understanding Application","item":"https://docs.hemihex.com/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="HemiHex Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="HemiHex Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.6c03f6b7.css">
<script src="/assets/js/runtime~main.7db908b8.js" defer="defer"></script>
<script src="/assets/js/main.85c7b9ac.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/intro"><div class="navbar__logo"><img src="/img/logo.png" alt="HemiHex" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="HemiHex" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hh-101/HH-101/Board Basics Tasks/Jetson-board-introduction">HH-101</a><a class="navbar__item navbar__link" href="/hh-bot/intro">HH-Bot</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/Board Basics Tasks/Jetson-board-introduction"><span title="Board Basics Tasks" class="categoryLinkLabel_W154">Board Basics Tasks</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/Linux Basics/linux-basics"><span title="Linux Basics" class="categoryLinkLabel_W154">Linux Basics</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/GPIO control course/gpio-description-04-gpiocontrolcourse-4-1"><span title="GPIO control course" class="categoryLinkLabel_W154">GPIO control course</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/Vision Basic Course/csi-camera-preview-05-visionbasiccourse-5-1"><span title="Vision Basic Course" class="categoryLinkLabel_W154">Vision Basic Course</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/OpenCV/opencv-image-reading"><span title="OpenCV" class="categoryLinkLabel_W154">OpenCV</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/Advanced Vision/1-1-tensorflow-on-jetson"><span title="Advanced Vision" class="categoryLinkLabel_W154">Advanced Vision</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/Docker/docker-introduction"><span title="Docker" class="categoryLinkLabel_W154">Docker</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/ROS1/ros-introduction-core"><span title="ROS1" class="categoryLinkLabel_W154">ROS1</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hh-101/HH-101/ROS2/ros2-service"><span title="ROS2" class="categoryLinkLabel_W154">ROS2</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/hh-101/HH-101/Offline AI Model/ollama-11-offlineaimodel-11-1"><span title="Offline AI Model" class="categoryLinkLabel_W154">Offline AI Model</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/ollama-11-offlineaimodel-11-1"><span title="Ollama" class="linkLabel_WmDU">Ollama</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/open-webui-11-offlineaimodel-11-2"><span title="Open WebUI" class="linkLabel_WmDU">Open WebUI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/llama-3-2-11-offlineaimodel-11-3"><span title="Llama 3.2" class="linkLabel_WmDU">Llama 3.2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/qwen3-11-offlineaimodel-11-4"><span title="Qwen3" class="linkLabel_WmDU">Qwen3</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/phi4-mini-11-offlineaimodel-11-5"><span title="Phi4-mini" class="linkLabel_WmDU">Phi4-mini</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/deepseek-r1-11-offlineaimodel-11-6"><span title="DeepSeek-R1" class="linkLabel_WmDU">DeepSeek-R1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/qwen2-5vl-11-offlineaimodel-11-7"><span title="Qwen2.5VL" class="linkLabel_WmDU">Qwen2.5VL</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/gemma3-11-offlineaimodel-11-8"><span title="Gemma3" class="linkLabel_WmDU">Gemma3</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/llava-11-offlineaimodel-11-9"><span title="Llava" class="linkLabel_WmDU">Llava</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/minicpm-v-11-offlineaimodel-11-10"><span title="MiniCPM-V" class="linkLabel_WmDU">MiniCPM-V</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-11-offlineaimodel-11-11"><span title="Multimodal Visual Understanding Application" class="linkLabel_WmDU">Multimodal Visual Understanding Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-text-image-application-11-offlineaimodel-11-12"><span title="Multimodal Text Image Application" class="linkLabel_WmDU">Multimodal Text Image Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-13"><span title="Multimodal Video Analysis Application" class="linkLabel_WmDU">Multimodal Video Analysis Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multi-module-visual-position-application-11-offlineaimodel-11-14"><span title="Multi-module Visual Position Application" class="linkLabel_WmDU">Multi-module Visual Position Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-table-scanning-application-11-offlineaimodel-11-15"><span title="Multimodal Table Scanning Application" class="linkLabel_WmDU">Multimodal Table Scanning Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-autonomous-agent-application-11-offlineaimodel-11-16"><span title="Multimodal Autonomous Agent Application" class="linkLabel_WmDU">Multimodal Autonomous Agent Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/voice-interaction-hardware-connection-11-offlineaimodel-11-17"><span title="Voice Interaction Hardware Connection" class="linkLabel_WmDU">Voice Interaction Hardware Connection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/offline-speech-to-text-asr-11-offlineaimodel-11-18"><span title="Offline Speech to Text (ASR)" class="linkLabel_WmDU">Offline Speech to Text (ASR)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/offline-text-to-speech-tts-11-offlineaimodel-11-19"><span title="Offline Text to Speech (TTS)" class="linkLabel_WmDU">Offline Text to Speech (TTS)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-speech-interaction-11-offlineaimodel-11-20"><span title="Multimodal Visual Understanding Speech Interaction" class="linkLabel_WmDU">Multimodal Visual Understanding Speech Interaction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-text-and-graphics-application-11-offlineaimodel-11-21"><span title="Multimodal Text and Graphics Application" class="linkLabel_WmDU">Multimodal Text and Graphics Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-22"><span title="Multimodal Video Analysis Application" class="linkLabel_WmDU">Multimodal Video Analysis Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multi-module-visual-position-application-11-offlineaimodel-11-23"><span title="Multi-module Visual Position Application" class="linkLabel_WmDU">Multi-module Visual Position Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-table-scanning-application-11-offlineaimodel-11-24"><span title="Multimodal Table Scanning Application" class="linkLabel_WmDU">Multimodal Table Scanning Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/ai-large-model-offline-voice-assistant-11-offlineaimodel-11-26"><span title="AI Large Model Offline Voice Assistant" class="linkLabel_WmDU">AI Large Model Offline Voice Assistant</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hh-101/HH-101/Offline AI Model/multimodal-autonomous-proxy-application-11-offlineaimodel-11-25"><span title="Multimodal Autonomous Proxy Application" class="linkLabel_WmDU">Multimodal Autonomous Proxy Application</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Offline AI Model</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Multimodal Visual Understanding Application</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Multimodal visual understand application</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-concept-introduction">1. Concept Introduction<a href="#1-concept-introduction" class="hash-link" aria-label="Direct link to 1. Concept Introduction" title="Direct link to 1. Concept Introduction" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="11-what-is-visual-understanding">1.1 What is &quot;Visual Understanding&quot;?<a href="#11-what-is-visual-understanding" class="hash-link" aria-label="Direct link to 1.1 What is &quot;Visual Understanding&quot;?" title="Direct link to 1.1 What is &quot;Visual Understanding&quot;?" translate="no">​</a></h3>
<p>In the largemodel project, the multimodal visual understanding feature enables robots to go beyond simply &quot;seeing&quot; a matrix of pixels and truly &quot;understand&quot; the content, objects, scenes, and relationships within an image. This is like giving robots a pair of thinking eyes.</p>
<p>The core tool for this feature is **seewhat`. When a user issues a command like &quot;see what&#x27;s here,&quot; the system invokes this tool, triggering a series of background operations that ultimately provide the user with AI-generated analysis of the live image in natural language.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="12-implementation-principle-overview">1.2 Implementation Principle Overview<a href="#12-implementation-principle-overview" class="hash-link" aria-label="Direct link to 1.2 Implementation Principle Overview" title="Direct link to 1.2 Implementation Principle Overview" translate="no">​</a></h3>
<p>The basic principle is to input two different types of information— image (visual information) and text (linguistic information) —into a powerful multimodal large model (such as LLaVA).</p>
<p>Simply put, this involves highlighting the corresponding parts of the image with text, and then describing the highlighted parts with language .</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-code-analysis">2. Code Analysis<a href="#2-code-analysis" class="hash-link" aria-label="Direct link to 2. Code Analysis" title="Direct link to 2. Code Analysis" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-code">Key Code<a href="#key-code" class="hash-link" aria-label="Direct link to Key Code" title="Direct link to Key Code" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-tool-layer-entry--largemodelutilstools_managerpy-">1. Tool Layer Entry ( largemodel/utils/tools_manager.py )<a href="#1-tool-layer-entry--largemodelutilstools_managerpy-" class="hash-link" aria-label="Direct link to 1. Tool Layer Entry ( largemodel/utils/tools_manager.py )" title="Direct link to 1. Tool Layer Entry ( largemodel/utils/tools_manager.py )" translate="no">​</a></h4>
<p>The seewhat function in this file defines the tool&#x27;s execution flow.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># From largemodel/utils/tools_manager.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ToolsManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">seewhat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Capture camera frame and analyze environment with AI model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">捕获摄像头画面并使用AI模型分析环境。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:return: Dictionary with scene description and image path, or None if failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_logger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Executing seewhat() tool&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use isolated context for image analysis. / 使用隔离的上下文进行图像分析。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">analysis_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_get_actual_scene_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Return structured data for the tool chain. / 为工具链返回结构化数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;description&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">analysis_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;image_path&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... (Error handling)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_get_actual_scene_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message_context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get AI-generated scene description for captured image.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">获取捕获图像的AI生成场景描述。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:param image_path: Path to captured image file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:return: Plain text description of scene.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... (构建Prompt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infer_with_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scene_prompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">simple_context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... (处理结果)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">except</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># From largemodel/utils/tools_manager.py</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ToolsManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">seewhat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Capture camera frame and analyze environment with AI model.</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">捕获摄像头画面并使用AI模型分析环境。</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:return: Dictionary with scene description and image path, or None if failed.</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_logger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Executing seewhat() tool&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">()</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use isolated context for image analysis. / 使用隔离的上下文进行图像分析。</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">analysis_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_get_actual_scene_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Return structured data for the tool chain. / 为工具链返回结构化数据。</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;description&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">analysis_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;image_path&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... (Error handling)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_get_actual_scene_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message_context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Get AI-generated scene description for captured image.</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">获取捕获图像的AI生成场景描述。</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:param image_path: Path to captured image file.</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:return: Plain text description of scene.</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... (构建Prompt)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infer_with_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scene_prompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">simple_context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... (处理结果)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">description</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">except</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-model-interface-layer--largemodelutilslarge_model_interfacepy-">2. Model Interface Layer ( largemodel/utils/large_model_interface.py )<a href="#2-model-interface-layer--largemodelutilslarge_model_interfacepy-" class="hash-link" aria-label="Direct link to 2. Model Interface Layer ( largemodel/utils/large_model_interface.py )" title="Direct link to 2. Model Interface Layer ( largemodel/utils/large_model_interface.py )" translate="no">​</a></h4>
<p>The infer_with_image function in this file is the unified entry point for all image understanding tasks. It is responsible for calling the specific model implementation based on the configuration.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># From largemodel/utils/large_model_interface.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infer_with_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;Unified image inference interface. / 统一的图像推理接口。&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... (准备消息)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 根据 self.llm_platform 的值，决定调用哪个具体实现  Determine which specific implementation to call based on the value of self.llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;ollama&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ollama_infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;tongyi&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... Logic for calling the Tongyi model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... (其他平台的逻辑)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;response&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;messages&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">()}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># From largemodel/utils/large_model_interface.py</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infer_with_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;Unified image inference interface. / 统一的图像推理接口。&quot;&quot;&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... (准备消息)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 根据 self.llm_platform 的值，决定调用哪个具体实现  Determine which specific implementation to call based on the value of self.llm_platform</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;ollama&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">response_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ollama_infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">elif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;tongyi&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... Logic for calling the Tongyi model</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pass</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ... (其他平台的逻辑)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;response&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;messages&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">()}</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="code-analysis">Code Analysis<a href="#code-analysis" class="hash-link" aria-label="Direct link to Code Analysis" title="Direct link to Code Analysis" translate="no">​</a></h3>
<p>This feature&#x27;s implementation involves two primary layers: the tool layer defines the business logic, and the model interface layer is responsible for communicating with the large language model. This layered design is key to achieving platform versatility.</p>
<p>Tool layer ( tools_manager.py ) :</p>
<p>Model interface layer ( large_model_interface.py ) :</p>
<p>In summary, the execution flow of the seewhat tool embodies a clear separation of responsibilities: ToolsManager is responsible for defining &quot;what to do&quot; (obtaining images and requesting analysis), while model_interface is responsible for defining &quot;how to do it&quot; (selecting the appropriate model platform based on the current configuration and interacting with it). This makes the tutorial&#x27;s interpretation universal; the core code logic remains consistent regardless of whether the user is in online or offline mode.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="31-configuring-the-offline-large-model">3.1 Configuring the Offline Large Model<a href="#31-configuring-the-offline-large-model" class="hash-link" aria-label="Direct link to 3.1 Configuring the Offline Large Model" title="Direct link to 3.1 Configuring the Offline Large Model" translate="no">​</a></h2>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="311-configuring-the-llm-platform-hemihexyaml">3.1.1 Configuring the LLM Platform (HemiHex.yaml)<a href="#311-configuring-the-llm-platform-hemihexyaml" class="hash-link" aria-label="Direct link to 3.1.1 Configuring the LLM Platform (HemiHex.yaml)" title="Direct link to 3.1.1 Configuring the LLM Platform (HemiHex.yaml)" translate="no">​</a></h4>
<p>This file determines which large model platform the model_service node loads as its primary language model.</p>
<p>Open the file in Terminal :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~/yahboom_ws/src/largemodel/config/HemiHex.yaml</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~/yahboom_ws/src/largemodel/config/HemiHex.yaml</span><br></span></code></pre></div></div>
<p>Modify/confirm llm_platform :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#模型服务器节点参数 Model server node parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros__parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;en&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#大模型接口语言 Large Model Interface Language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useolinetts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#文字模式下此项无效，可忽略 This item is invalid in text mode and can be ignored</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 大模型配置 Large model configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;ollama&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 关键: 确保这里是 &#x27;ollama&#x27; Key: Make sure it&#x27;s &#x27;ollama&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">regional_setting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;international&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">model_service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#模型服务器节点参数 Model server node parameters</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros__parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;en&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#大模型接口语言 Large Model Interface Language</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">useolinetts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#文字模式下此项无效，可忽略 This item is invalid in text mode and can be ignored</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 大模型配置 Large model configuration</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">llm_platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;ollama&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 关键: 确保这里是 &#x27;ollama&#x27; Key: Make sure it&#x27;s &#x27;ollama&#x27;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">regional_setting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;international&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="312-configuring-the-model-interface--large_model_interfaceyaml-">3.1.2 Configuring the Model Interface ( large_model_interface.yaml )<a href="#312-configuring-the-model-interface--large_model_interfaceyaml-" class="hash-link" aria-label="Direct link to 3.1.2 Configuring the Model Interface ( large_model_interface.yaml )" title="Direct link to 3.1.2 Configuring the Model Interface ( large_model_interface.yaml )" translate="no">​</a></h4>
<p>This file defines which vision model to use when the ollama platform is selected.</p>
<p>1.Open the file in Terminal</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml</span><br></span></code></pre></div></div>
<p>2.Find the ollama related configuration</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#.....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## 离线大模型 (Offline Large Language Models)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ollama配置 Ollama Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ollama_host:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;http://localhost:11434&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ollama服务器地址 Ollama server address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ollama_model:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;llava&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 关键: 将这里改为你已下载的多模态模型，如 &quot;llava&quot; Key: Change this to the multimodal model you downloaded, such as &quot;llava&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#.....</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#.....</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## 离线大模型 (Offline Large Language Models)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Ollama配置 Ollama Configuration</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ollama_host:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;http://localhost:11434&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ollama服务器地址 Ollama server address</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ollama_model:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;llava&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 关键: 将这里改为你已下载的多模态模型，如 &quot;llava&quot; Key: Change this to the multimodal model you downloaded, such as &quot;llava&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#.....</span><br></span></code></pre></div></div>
<p>Note : Please make sure that the model specified in the configuration parameters (such as llava ) can handle multimodal input.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="32-starting-and-testing-the-function-text-input-mode">3.2 Starting and Testing the Function (Text Input Mode)<a href="#32-starting-and-testing-the-function-text-input-mode" class="hash-link" aria-label="Direct link to 3.2 Starting and Testing the Function (Text Input Mode)" title="Direct link to 3.2 Starting and Testing the Function (Text Input Mode)" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Due to performance limitations, the performance of the Jetson Orin Nano 4GB is poor. To experience this function, please refer to the corresponding section in [Online Large Model (Text Interaction)]</p></div></div>
<p>Start the largemodel main program (text mode) : Open a terminal and run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch largemodel largemodel_control.launch.py text_chat_mode:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch largemodel largemodel_control.launch.py text_chat_mode:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre></div></div>
<p>Send text command : Open another terminal again and run the following command,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run text_chat text_chat</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xxxxxxxxxx</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run text_chat text_chat</span><br></span></code></pre></div></div>
<p>Then start typing the text: &quot;What do you see&quot;.</p>
<p>Observation : In the first terminal where you run the main program, you will see log output indicating that the system received the text command, invoked the seewhat tool, and ultimately printed out the text description of the desktop generated by the LLaVA model.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-common-problems-and-solutions">4. Common Problems and Solutions<a href="#4-common-problems-and-solutions" class="hash-link" aria-label="Direct link to 4. Common Problems and Solutions" title="Direct link to 4. Common Problems and Solutions" translate="no">​</a></h2>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="problem-1-the-log-displays-failed-to-call-ollama-vision-model-or-the-connection-is-refused">Problem 1: The log displays &quot;Failed to call ollama vision model&quot; or the connection is refused.<a href="#problem-1-the-log-displays-failed-to-call-ollama-vision-model-or-the-connection-is-refused" class="hash-link" aria-label="Direct link to Problem 1: The log displays &quot;Failed to call ollama vision model&quot; or the connection is refused." title="Direct link to Problem 1: The log displays &quot;Failed to call ollama vision model&quot; or the connection is refused." translate="no">​</a></h4>
<p>Solution :</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="problem-2-the-seewhat-tool-returns-unable-to-open-camera-or-fails-to-capture">Problem 2: The seewhat tool returns &quot;Unable to open camera&quot; or fails to capture.<a href="#problem-2-the-seewhat-tool-returns-unable-to-open-camera-or-fails-to-capture" class="hash-link" aria-label="Direct link to Problem 2: The seewhat tool returns &quot;Unable to open camera&quot; or fails to capture." title="Direct link to Problem 2: The seewhat tool returns &quot;Unable to open camera&quot; or fails to capture." translate="no">​</a></h4>
<p>Solution :</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/hh-101/HH-101/Offline AI Model/minicpm-v-11-offlineaimodel-11-10"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MiniCPM-V</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hh-101/HH-101/Offline AI Model/multimodal-text-image-application-11-offlineaimodel-11-12"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Multimodal Text Image Application</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-concept-introduction" class="table-of-contents__link toc-highlight">1. Concept Introduction</a><ul><li><a href="#11-what-is-visual-understanding" class="table-of-contents__link toc-highlight">1.1 What is &quot;Visual Understanding&quot;?</a></li><li><a href="#12-implementation-principle-overview" class="table-of-contents__link toc-highlight">1.2 Implementation Principle Overview</a></li></ul></li><li><a href="#2-code-analysis" class="table-of-contents__link toc-highlight">2. Code Analysis</a><ul><li><a href="#key-code" class="table-of-contents__link toc-highlight">Key Code</a></li><li><a href="#code-analysis" class="table-of-contents__link toc-highlight">Code Analysis</a></li></ul></li><li><a href="#31-configuring-the-offline-large-model" class="table-of-contents__link toc-highlight">3.1 Configuring the Offline Large Model</a><ul><li><a href="#32-starting-and-testing-the-function-text-input-mode" class="table-of-contents__link toc-highlight">3.2 Starting and Testing the Function (Text Input Mode)</a></li></ul></li><li><a href="#4-common-problems-and-solutions" class="table-of-contents__link toc-highlight">4. Common Problems and Solutions</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">HH-101 Jetson</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matintechlab.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matin Tech Lab<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://matin.engineer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matin Engineer<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/matinmlk/hemihex" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright HemiHex© 2026.</div></div></div></footer></div>
</body>
</html>