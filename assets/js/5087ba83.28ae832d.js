"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[2127],{9516:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"HH-101/ROS2/ros2-tf2","title":"TF2 Coordinate Transformation","description":"1. Introduction to TF2","source":"@site/docs/hh101/HH-101/10 - ROS2/20-ros2-tf2.md","sourceDirName":"HH-101/10 - ROS2","slug":"/HH-101/ROS2/ros2-tf2","permalink":"/hh-101/HH-101/ROS2/ros2-tf2","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":33,"frontMatter":{"sidebar_position":33,"title":"TF2 Coordinate Transformation"},"sidebar":"hh101Sidebar","previous":{"title":"Gazebo Simulation Platform","permalink":"/hh-101/HH-101/ROS2/ros2-gazebo"},"next":{"title":"Ollama","permalink":"/hh-101/HH-101/Offline AI Model/ollama-11-offlineaimodel-11-1"}}');var s=i(74848),r=i(28453);const a={sidebar_position:33,title:"TF2 Coordinate Transformation"},o="ROS 2 TF2 Coordinate Transformation",l={},d=[{value:"1. Introduction to TF2",id:"1-introduction-to-tf2",level:2},{value:"2. Coordinate Systems in Robotics",id:"2-coordinate-systems-in-robotics",level:2},{value:"3. TF Command Line Operations",id:"3-tf-command-line-operations",level:2},{value:"3.1 Installing Required Packages",id:"31-installing-required-packages",level:3},{value:"3.2 Starting the Demo",id:"32-starting-the-demo",level:3},{value:"3.3 Viewing the TF Tree",id:"33-viewing-the-tf-tree",level:3},{value:"3.4 Querying Transform Information",id:"34-querying-transform-information",level:3},{value:"3.5 TF Visualization in RViz",id:"35-tf-visualization-in-rviz",level:3},{value:"4. Static Coordinate Transformation",id:"4-static-coordinate-transformation",level:2},{value:"4.1 Publishing Static Transform",id:"41-publishing-static-transform",level:3},{value:"4.2 Monitoring Static TF",id:"42-monitoring-static-tf",level:3},{value:"4.3 Visualizing Static TF",id:"43-visualizing-static-tf",level:3},{value:"5. Case Introduction",id:"5-case-introduction",level:2},{value:"6. Turtle Follow Principle",id:"6-turtle-follow-principle",level:2},{value:"7. Create TF Package",id:"7-create-tf-package",level:2},{value:"Maintained by HemiHex",id:"maintained-by-hemihex",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ros-2-tf2-coordinate-transformation",children:"ROS 2 TF2 Coordinate Transformation"})}),"\n",(0,s.jsx)(n.h2,{id:"1-introduction-to-tf2",children:"1. Introduction to TF2"}),"\n",(0,s.jsxs)(n.p,{children:["Coordinate systems are a fundamental concept in robotics. A complete\r\nrobotic system often contains many coordinate systems. ROS provides a\r\npowerful tool to manage their relationships: ",(0,s.jsx)(n.strong,{children:"TF2"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Reference: ",(0,s.jsx)(n.a,{href:"https://ieeexplore.ieee.org/abstract/document/6556373",children:"tf: The transform library |\r\nIEEE"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-coordinate-systems-in-robotics",children:"2. Coordinate Systems in Robotics"}),"\n",(0,s.jsxs)(n.p,{children:["In mobile robotics: - ",(0,s.jsx)(n.strong,{children:"base_link"})," represents the robot center -\r\n",(0,s.jsx)(n.strong,{children:"laser_link"})," represents the radar position - ",(0,s.jsx)(n.strong,{children:"odom"})," represents\r\nodometry - ",(0,s.jsx)(n.strong,{children:"map"})," represents the global reference"]}),"\n",(0,s.jsx)(n.p,{children:"These coordinate relationships can be fixed or dynamic. A reliable\r\ncoordinate management system is essential."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Coordinate Example",src:i(16641).A+"",width:"1291",height:"701"})}),"\n",(0,s.jsxs)(n.p,{children:["Transformation consists of ",(0,s.jsx)(n.strong,{children:"translation + rotation"}),", represented using\r\na ",(0,s.jsx)(n.strong,{children:"4\xd74 matrix"}),". TF2 encapsulates all these calculations."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-tf-command-line-operations",children:"3. TF Command Line Operations"}),"\n",(0,s.jsx)(n.p,{children:"This section demonstrates turtle-following using TF2."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This demo is recommended to run inside a virtual machine."})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"31-installing-required-packages",children:"3.1 Installing Required Packages"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-${ROS_DISTRO}-turtle-tf2-py ros-humble-tf2-tools\r\nsudo pip3 install transforms3d\r\nsudo apt install ros-${ROS_DISTRO}-rqt-tf-tree\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Installation",src:i(29471).A+"",width:"1131",height:"395"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"32-starting-the-demo",children:"3.2 Starting the Demo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch turtle_tf2_py turtle_tf2_demo.launch.py\r\nros2 run turtlesim turtle_teleop_key\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Turtle Follow",src:i(25192).A+"",width:"1324",height:"816"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"33-viewing-the-tf-tree",children:"3.3 Viewing the TF Tree"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_tf_tree rqt_tf_tree\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"TF Tree",src:i(32203).A+"",width:"877",height:"484"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"34-querying-transform-information",children:"3.4 Querying Transform Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run tf2_ros tf2_echo turtle2 turtle1\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"TF Output",src:i(22288).A+"",width:"734",height:"484"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"35-tf-visualization-in-rviz",children:"3.5 TF Visualization in RViz"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"rviz2\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Set reference frame to ",(0,s.jsx)(n.code,{children:"world"})," and add ",(0,s.jsx)(n.strong,{children:"TF"})," plugin."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"RViz TF",src:i(11161).A+"",width:"1909",height:"792"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-static-coordinate-transformation",children:"4. Static Coordinate Transformation"}),"\n",(0,s.jsx)(n.p,{children:"A static transform defines fixed relations like sensor to base."}),"\n",(0,s.jsx)(n.h3,{id:"41-publishing-static-transform",children:"4.1 Publishing Static Transform"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run tf2_ros static_transform_publisher 0 0 3 0 0 3.14 A B\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Static TF",src:i(85686).A+"",width:"1125",height:"229"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"42-monitoring-static-tf",children:"4.2 Monitoring Static TF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run tf2_ros tf2_echo A B\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"43-visualizing-static-tf",children:"4.3 Visualizing Static TF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"rviz2\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Static TF RViz",src:i(29600).A+"",width:"1919",height:"1010"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-case-introduction",children:"5. Case Introduction"}),"\n",(0,s.jsx)(n.p,{children:"You will: - Implement turtle-follow logic - Implement dynamic TF\r\nbroadcaster - Implement coordinate monitoring - Apply PID for motion\r\nconversion"}),"\n",(0,s.jsx)(n.p,{children:"Advanced: - Time-based TF transformation"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-turtle-follow-principle",children:"6. Turtle Follow Principle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Principle Diagram",src:i(85673).A+"",width:"581",height:"612"})}),"\n",(0,s.jsx)(n.p,{children:"Vectors represent direction and distance between turtles. TF\r\ncontinuously calculates transformations. Velocity is derived from these\r\nvectors."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"7-create-tf-package",children:"7. Create TF Package"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create pkg_tf --build-type ament_python --dependencies rclpy --node-name turtle_tf_broadcaster\n"})}),"\n",(0,s.jsx)(n.p,{children:"This generates a TF broadcaster node template."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"maintained-by-hemihex",children:"Maintained by HemiHex"}),"\n",(0,s.jsxs)(n.p,{children:["This documentation is maintained by ",(0,s.jsx)(n.strong,{children:"HemiHex"})," for ROS 2 TF2 workflows."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},11161:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20231031175440027-b8b235342a28a866a2b5b6dd97576141.png"},16641:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20220528142112163-b8da4d20ddb1f392d8f19945d1af98e8.png"},22288:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20231031174933242-1b6000a7a3a7dae27cfe8f1d433ff4c9.png"},25192:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20231031174611320-39e16f185a73dfa054f095a8076402a6.png"},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var t=i(96540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},29471:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20250905190746493-3e1be8c8630ac3b7b2b226edb52603dc.png"},29600:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20231031180746331-e1841a6edadde4bbf93ce29f213036a2.png"},32203:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20231031174844745-c33cecdf8b7276be9d1fde677f6608e7.png"},85673:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20220528143750881-82b9f43b5823bea1006e7745232e8c31.png"},85686:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/image-20250905190855196-f7ae522ccbb2dbeeeeeaafcfab7ec4b0.png"}}]);