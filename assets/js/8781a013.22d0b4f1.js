"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[9842],{28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var a=r(96540);const l={},s=a.createContext(l);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),a.createElement(s.Provider,{value:n},e.children)}},51538:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-22","title":"Multimodal Video Analysis Application","description":"1. Concept Introduction","source":"@site/docs/hh101/HH-101/11 - Offline AI Model/22-multimodal-video-analysis-application-11-offlineaimodel-11-22.md","sourceDirName":"HH-101/11 - Offline AI Model","slug":"/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-22","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-22","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Multimodal Video Analysis Application","sidebar_position":0},"sidebar":"hh101Sidebar","previous":{"title":"Multimodal Text and Graphics Application","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-text-and-graphics-application-11-offlineaimodel-11-21"},"next":{"title":"Multi-module Visual Position Application","permalink":"/hh-101/HH-101/Offline AI Model/multi-module-visual-position-application-11-offlineaimodel-11-23"}}');var l=r(74848),s=r(28453);const i={title:"Multimodal Video Analysis Application",sidebar_position:0},o="6.Multimodal video analysis application",d={},t=[{value:"1. Concept Introduction",id:"1-concept-introduction",level:2},{value:"1.1 What is &quot;Video Analysis&quot;?",id:"11-what-is-video-analysis",level:3},{value:"1.2 Implementation Principle Overview",id:"12-implementation-principle-overview",level:3},{value:"2. Code Analysis",id:"2-code-analysis",level:2},{value:"Key Code",id:"key-code",level:3},{value:"1. Tool Layer Entry ( largemodel/utils/tools_manager.py )",id:"1-tool-layer-entry--largemodelutilstools_managerpy-",level:4},{value:"2. Model Interface Layer and Frame Extraction ( largemodel/utils/large_model_interface.py )",id:"2-model-interface-layer-and-frame-extraction--largemodelutilslarge_model_interfacepy-",level:4},{value:"Code Analysis",id:"code-analysis",level:3},{value:"3. Practical Operations",id:"3-practical-operations",level:2},{value:"3.1 Configuring the Offline Large Model",id:"31-configuring-the-offline-large-model",level:3},{value:"3.1.1 Configuring the LLM Platform (HemiHex.yaml)",id:"311-configuring-the-llm-platform-hemihexyaml",level:4},{value:"3.1.2 Configuration model interface ( large_model_interface.yaml )",id:"312-configuration-model-interface--large_model_interfaceyaml-",level:4},{value:"3.2 Starting and Testing the Function",id:"32-starting-and-testing-the-function",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"6multimodal-video-analysis-application",children:"6.Multimodal video analysis application"})}),"\n",(0,l.jsx)(n.h2,{id:"1-concept-introduction",children:"1. Concept Introduction"}),"\n",(0,l.jsx)(n.h3,{id:"11-what-is-video-analysis",children:'1.1 What is "Video Analysis"?'}),"\n",(0,l.jsx)(n.p,{children:"In the largemodel project, the multimodal video analysis feature enables a robot to process a video and summarize its core content, describe key events, or answer specific questions about the video in natural language. This allows the robot to leap from understanding only static images to understanding the dynamic and temporal world."}),"\n",(0,l.jsx)(n.p,{children:'The core tool for this feature is **analyze_video`. When a user provides a video file and asks a question (for example, "Summarize what this video says"), the system invokes this tool to process and analyze the video and return a textual response from the AI.'}),"\n",(0,l.jsx)(n.h3,{id:"12-implementation-principle-overview",children:"1.2 Implementation Principle Overview"}),"\n",(0,l.jsx)(n.p,{children:"The core challenge of offline video analysis lies in how to efficiently process video data containing hundreds or thousands of frames. A popular implementation principle is as follows:"}),"\n",(0,l.jsx)(n.p,{children:"Simply put, it condenses a video into a few key images and their sequence, allowing the user to understand the entire story like a comic strip and answer related questions."}),"\n",(0,l.jsx)(n.h2,{id:"2-code-analysis",children:"2. Code Analysis"}),"\n",(0,l.jsx)(n.h3,{id:"key-code",children:"Key Code"}),"\n",(0,l.jsx)(n.h4,{id:"1-tool-layer-entry--largemodelutilstools_managerpy-",children:"1. Tool Layer Entry ( largemodel/utils/tools_manager.py )"}),"\n",(0,l.jsx)(n.p,{children:"The analyze_video function in this file defines the tool's execution flow."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# From largemodel/utils/tools_manager.py\r\nclass\r\nToolsManager\r\n:\r\n# ...\r\ndef\r\nanalyze_video\r\n(\r\nself\r\n,\r\nargs\r\n):\r\n"""\r\nAnalyze video file and provide content description.\r\n\u5206\u6790\u89c6\u9891\u6587\u4ef6\u5e76\u63d0\u4f9b\u5185\u5bb9\u63cf\u8ff0\u3002\r\n:param args: Arguments containing video path.\r\n:return: Dictionary with video description and path.\r\n"""\r\nself\r\n.\r\nnode\r\n.\r\nget_logger\r\n().\r\ninfo\r\n(\r\nf"Executing analyze_video() tool with args: {args}"\r\n)\r\ntry\r\n:\r\nvideo_path\r\n=\r\nargs\r\n.\r\nget\r\n(\r\n"video_path"\r\n)\r\n# ... (\u667a\u80fd\u8def\u5f84\u56de\u9000\u673a\u5236)\r\nif\r\nvideo_path\r\nand\r\nos\r\n.\r\npath\r\n.\r\nexists\r\n(\r\nvideo_path\r\n):\r\n# ... (\u6784\u5efaPrompt)\r\n# Use a fully isolated, one-time context for video analysis to ensure a plain text description. / \u4f7f\u7528\u5b8c\u5168\u9694\u79bb\u7684\u4e00\u6b21\u6027\u4e0a\u4e0b\u6587\u8fdb\u884c\u89c6\u9891\u5206\u6790\uff0c\u4ee5\u786e\u4fdd\u83b7\u5f97\u7eaf\u6587\u672c\u63cf\u8ff0\u3002\r\nsimple_context\r\n= [{\r\n"role"\r\n:\r\n"system"\r\n,\r\n"content"\r\n:\r\n"You are a video description assistant. ..."\r\n}]\r\nresult\r\n=\r\nself\r\n.\r\nnode\r\n.\r\nmodel_client\r\n.\r\ninfer_with_video\r\n(\r\nvideo_path\r\n,\r\nprompt\r\n,\r\nmessage\r\n=\r\nsimple_context\r\n)\r\n# ... (\u5904\u7406\u7ed3\u679c)\r\nreturn\r\n{\r\n"description"\r\n:\r\ndescription\r\n,\r\n"video_path"\r\n:\r\nvideo_path\r\n}\r\n# ... (\u9519\u8bef\u5904\u7406)\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# From largemodel/utils/tools_manager.py\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"class\r\nToolsManager\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ...\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"def\r\nanalyze_video\r\n(\r\nself\r\n,\r\nargs\r\n):\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"""\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"Analyze video file and provide content description.\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u5206\u6790\u89c6\u9891\u6587\u4ef6\u5e76\u63d0\u4f9b\u5185\u5bb9\u63cf\u8ff0\u3002\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:":param args: Arguments containing video path.\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:":return: Dictionary with video description and path.\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"""\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'self\r\n.\r\nnode\r\n.\r\nget_logger\r\n().\r\ninfo\r\n(\r\nf"Executing analyze_video() tool with args: {args}"\r\n)\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"try\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'video_path\r\n=\r\nargs\r\n.\r\nget\r\n(\r\n"video_path"\r\n)\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (\u667a\u80fd\u8def\u5f84\u56de\u9000\u673a\u5236)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"if\r\nvideo_path\r\nand\r\nos\r\n.\r\npath\r\n.\r\nexists\r\n(\r\nvideo_path\r\n):\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (\u6784\u5efaPrompt)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Use a fully isolated, one-time context for video analysis to ensure a plain text description. / \u4f7f\u7528\u5b8c\u5168\u9694\u79bb\u7684\u4e00\u6b21\u6027\u4e0a\u4e0b\u6587\u8fdb\u884c\u89c6\u9891\u5206\u6790\uff0c\u4ee5\u786e\u4fdd\u83b7\u5f97\u7eaf\u6587\u672c\u63cf\u8ff0\u3002\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"simple_context\r\n= [{\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"role"\r\n:\r\n"system"\r\n,\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"content"\r\n:\r\n"You are a video description assistant. ..."\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"}]\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"result\r\n=\r\nself\r\n.\r\nnode\r\n.\r\nmodel_client\r\n.\r\ninfer_with_video\r\n(\r\nvideo_path\r\n,\r\nprompt\r\n,\r\nmessage\r\n=\r\nsimple_context\r\n)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (\u5904\u7406\u7ed3\u679c)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"return\r\n{\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"description"\r\n:\r\ndescription\r\n,\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"video_path"\r\n:\r\nvideo_path\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (\u9519\u8bef\u5904\u7406)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-model-interface-layer-and-frame-extraction--largemodelutilslarge_model_interfacepy-",children:"2. Model Interface Layer and Frame Extraction ( largemodel/utils/large_model_interface.py )"}),"\n",(0,l.jsx)(n.p,{children:"The functions in this file are responsible for processing video files and passing them to the underlying model."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'\u200b\r\nx\r\n# From largemodel/utils/large_model_interface.py\r\n\u200b\r\nclass\r\nmodel_interface\r\n:\r\n# ...\r\ndef\r\ninfer_with_video\r\n(\r\nself\r\n,\r\nvideo_path\r\n,\r\ntext\r\n=\r\nNone\r\n,\r\nmessage\r\n=\r\nNone\r\n):\r\n"""Unified video inference interface. / \u7edf\u4e00\u7684\u89c6\u9891\u63a8\u7406\u63a5\u53e3\u3002"""\r\n# ... (Prepare Message)\r\ntry\r\n:\r\n# Determine which specific implementation to call based on self.llm_platform\r\nif\r\nself\r\n.\r\nllm_platform\r\n==\r\n\'ollama\'\r\n:\r\nresponse_content\r\n=\r\nself\r\n.\r\nollama_infer\r\n(\r\nself\r\n.\r\nmessages\r\n,\r\nvideo_path\r\n=\r\nvideo_path\r\n)\r\n# ... (The logic of other online platforms)\r\n# ...\r\nreturn\r\n{\r\n\'response\'\r\n:\r\nresponse_content\r\n,\r\n\'messages\'\r\n:\r\nself\r\n.\r\nmessages\r\n.\r\ncopy\r\n()}\r\n\u200b\r\ndef\r\n_extract_video_frames\r\n(\r\nself\r\n,\r\nvideo_path\r\n,\r\nmax_frames\r\n=\r\n5\r\n):\r\n"""Extract keyframes from a video for analysis. / \u4ece\u89c6\u9891\u4e2d\u63d0\u53d6\u5173\u952e\u5e27\u7528\u4e8e\u5206\u6790\u3002"""\r\ntry\r\n:\r\nimport\r\ncv2\r\n# ... (Video reading and frame interval calculation)\r\nwhile\r\nextracted_count\r\n<\r\nmax_frames\r\n:\r\n# ... (Looping through video frames)\r\nif\r\nframe_count\r\n%\r\nframe_interval\r\n==\r\n0\r\n:\r\n# ... (Save the frame as a temporary image)\r\nframe_base64\r\n=\r\nself\r\n.\r\nencode_file_to_base64\r\n(\r\ntemp_path\r\n)\r\nframe_images\r\n.\r\nappend\r\n(\r\nframe_base64\r\n)\r\n# ...\r\nreturn\r\nframe_images\r\n# ... (Exception handling)\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# From largemodel/utils/large_model_interface.py\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u200b\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"class\r\nmodel_interface\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ...\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"def\r\ninfer_with_video\r\n(\r\nself\r\n,\r\nvideo_path\r\n,\r\ntext\r\n=\r\nNone\r\n,\r\nmessage\r\n=\r\nNone\r\n):\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"""Unified video inference interface. / \u7edf\u4e00\u7684\u89c6\u9891\u63a8\u7406\u63a5\u53e3\u3002"""\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (Prepare Message)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"try\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Determine which specific implementation to call based on self.llm_platform\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"if\r\nself\r\n.\r\nllm_platform\r\n==\r\n'ollama'\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"response_content\r\n=\r\nself\r\n.\r\nollama_infer\r\n(\r\nself\r\n.\r\nmessages\r\n,\r\nvideo_path\r\n=\r\nvideo_path\r\n)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (The logic of other online platforms)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ...\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"return\r\n{\r\n'response'\r\n:\r\nresponse_content\r\n,\r\n'messages'\r\n:\r\nself\r\n.\r\nmessages\r\n.\r\ncopy\r\n()}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u200b\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"def\r\n_extract_video_frames\r\n(\r\nself\r\n,\r\nvideo_path\r\n,\r\nmax_frames\r\n=\r\n5\r\n):\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'"""Extract keyframes from a video for analysis. / \u4ece\u89c6\u9891\u4e2d\u63d0\u53d6\u5173\u952e\u5e27\u7528\u4e8e\u5206\u6790\u3002"""\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"try\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"import\r\ncv2\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (Video reading and frame interval calculation)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"while\r\nextracted_count\r\n<\r\nmax_frames\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (Looping through video frames)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"if\r\nframe_count\r\n%\r\nframe_interval\r\n==\r\n0\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (Save the frame as a temporary image)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"frame_base64\r\n=\r\nself\r\n.\r\nencode_file_to_base64\r\n(\r\ntemp_path\r\n)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"frame_images\r\n.\r\nappend\r\n(\r\nframe_base64\r\n)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ...\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"return\r\nframe_images\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# ... (Exception handling)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"code-analysis",children:"Code Analysis"}),"\n",(0,l.jsx)(n.p,{children:"The implementation of video analysis is more complex than image analysis. It requires a key preprocessing step at the model interface layer: frame extraction."}),"\n",(0,l.jsx)(n.p,{children:"In summary, the general process of video analysis is: ToolsManager initiates an analysis request -> model_interface intercepts the request and calls _extract_video_frames to decompose the video file into multiple keyframe images -> model_interface sends these images, along with analysis instructions, to the corresponding model platform according to the configuration -> the model returns a comprehensive description of the video -> the results are finally returned to ToolsManager . This design ensures the stability and versatility of upper-layer applications."}),"\n",(0,l.jsx)(n.h2,{id:"3-practical-operations",children:"3. Practical Operations"}),"\n",(0,l.jsx)(n.h3,{id:"31-configuring-the-offline-large-model",children:"3.1 Configuring the Offline Large Model"}),"\n",(0,l.jsx)(n.h4,{id:"311-configuring-the-llm-platform-hemihexyaml",children:"3.1.1 Configuring the LLM Platform (HemiHex.yaml)"}),"\n",(0,l.jsx)(n.p,{children:"This file determines which large model platform the model_service node loads as its primary language model."}),"\n",(0,l.jsx)(n.p,{children:"Open the file in Terminal :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"vim\r\n~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"vim\r\n~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"Modify/Confirm llm_platform :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"model_service\r\n:\r\n#Model server node parameters\r\nros__parameters\r\n:\r\nlanguage\r\n:\r\n'en'\r\n#Large Model Interface Language\r\nuseolinetts\r\n:\r\nTrue\r\n#This item is invalid in text mode and can be ignored\r\n\u200b\r\n# Large model configuration\r\nllm_platform\r\n:\r\n'ollama'\r\n# Key: Make sure it's 'ollama'\r\nregional_setting\r\n:\r\n\"international\"\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"model_service\r\n:\r\n#Model server node parameters\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros__parameters\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"language\r\n:\r\n'en'\r\n#Large Model Interface Language\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"useolinetts\r\n:\r\nTrue\r\n#This item is invalid in text mode and can be ignored\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u200b\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Large model configuration\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"llm_platform\r\n:\r\n'ollama'\r\n# Key: Make sure it's 'ollama'\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'regional_setting\r\n:\r\n"international"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"312-configuration-model-interface--large_model_interfaceyaml-",children:"3.1.2 Configuration model interface ( large_model_interface.yaml )"}),"\n",(0,l.jsx)(n.p,{children:"This file defines which visual model to use when the platform is selected as ollama ."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\r\nvim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"vim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"2.Find the ollama related configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#.....\r\n## \u79bb\u7ebf\u5927\u6a21\u578b (Offline Large Language Models)\r\n# Ollama Configuration\r\nollama_host:\r\n"http://localhost:11434"\r\n# Ollama server address\r\nollama_model:\r\n"llava"\r\n# Key: Change this to the multimodal model you downloaded, such as "llava"\r\n#.....\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#.....\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"## \u79bb\u7ebf\u5927\u6a21\u578b (Offline Large Language Models)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Ollama Configuration\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'ollama_host:\r\n"http://localhost:11434"\r\n# Ollama server address\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'ollama_model:\r\n"llava"\r\n# Key: Change this to the multimodal model you downloaded, such as "llava"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#.....\n"})}),"\n",(0,l.jsx)(n.p,{children:"Note : Please ensure that the model specified in the configuration parameters (e.g., llava ) can handle multimodal input."}),"\n",(0,l.jsx)(n.h3,{id:"32-starting-and-testing-the-function",children:"3.2 Starting and Testing the Function"}),"\n",(0,l.jsx)(n.p,{children:"Note: Due to performance limitations, this example cannot be run on the Jetson Orin Nano 4GB. To experience this feature, please refer to the corresponding section in [Online Large Model (Voice Interaction)]"}),"\n",(0,l.jsx)(n.p,{children:"Prepare a video file :"}),"\n",(0,l.jsx)(n.p,{children:"Place the video file to be tested in the following path: /home/jetson/yahboom_ws/src/largemodel/resources_file/analyze_video"}),"\n",(0,l.jsx)(n.p,{children:"Then name the video test_video.mp4"}),"\n",(0,l.jsx)(n.p,{children:"Start the largemodel main program :"}),"\n",(0,l.jsx)(n.p,{children:"Open a terminal and run the following command"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\r\nros2 launch largemodel largemodel_control.launch.py\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 launch largemodel largemodel_control.launch.py\n"})}),"\n",(0,l.jsx)(n.p,{children:"Test :"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);