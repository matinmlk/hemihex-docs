"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[8640],{18788:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/image-20231023163116372-d9e61a412110230152652a5f41f31d4f.png"},20528:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Jetson/ROS2/ros2-nodes","title":"Nodes","description":"1. Node Introduction","source":"@site/docs/Jetson/10 - ROS2/05-ros2-nodes.md","sourceDirName":"Jetson/10 - ROS2","slug":"/Jetson/ROS2/ros2-nodes","permalink":"/docs/Jetson/ROS2/ros2-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Jetson/10 - ROS2/05-ros2-nodes.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Nodes"},"sidebar":"tutorialSidebar","previous":{"title":"Function Packages","permalink":"/docs/Jetson/ROS2/ros2-function-packages"},"next":{"title":"Topic Communication","permalink":"/docs/Jetson/ROS2/ros2-topic-communication"}}');var s=o(74848),l=o(28453);const i={sidebar_position:15,title:"Nodes"},t="6. ROS 2 Nodes",d={},a=[{value:"1. Node Introduction",id:"1-node-introduction",level:2},{value:"2. Node Creation Process",id:"2-node-creation-process",level:2},{value:"3. Hello World Node Example (Python)",id:"3-hello-world-node-example-python",level:2},{value:"3.1 Creating the Python Package",id:"31-creating-the-python-package",level:3},{value:"3.2 Writing the Node Code",id:"32-writing-the-node-code",level:3},{value:"Adding Entry Points in <code>setup.py</code>",id:"adding-entry-points-in-setuppy",level:3},{value:"3.3 Compiling the Package",id:"33-compiling-the-package",level:2},{value:"3.4 Running the Node",id:"34-running-the-node",level:2}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"6-ros-2-nodes",children:"6. ROS 2 Nodes"})}),"\n",(0,s.jsx)(n.h2,{id:"1-node-introduction",children:"1. Node Introduction"}),"\n",(0,s.jsxs)(n.p,{children:["Regardless of the communication method used, all ROS 2 communication\r\nrelies on ",(0,s.jsx)(n.strong,{children:"nodes"}),".",(0,s.jsx)(n.br,{}),"\n","Each node typically represents a single functional module. For example:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A radar driver node publishes radar scan data."}),"\n",(0,s.jsx)(n.li,{children:"A camera driver node publishes image messages."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["A complete robot system may run many nodes simultaneously.",(0,s.jsx)(n.br,{}),"\n","A single executable file (C++ or Python) can contain ",(0,s.jsx)(n.strong,{children:"one or more\r\nnodes"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-node-creation-process",children:"2. Node Creation Process"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create a program file\\"}),"\n",(0,s.jsx)(n.li,{children:"Import necessary ROS 2 libraries\\"}),"\n",(0,s.jsx)(n.li,{children:"Implement node logic\\"}),"\n",(0,s.jsx)(n.li,{children:"Configure package metadata\\"}),"\n",(0,s.jsx)(n.li,{children:"Compile and run the node"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-hello-world-node-example-python",children:"3. Hello World Node Example (Python)"}),"\n",(0,s.jsx)(n.h3,{id:"31-creating-the-python-package",children:"3.1 Creating the Python Package"}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"workspace"})," with your actual workspace path:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd workspace/src\r\nros2 pkg create pkg_helloworld_py --build-type ament_python --dependencies rclpy --node-name helloworld\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"32-writing-the-node-code",children:"3.2 Writing the Node Code"}),"\n",(0,s.jsxs)(n.p,{children:["A template file ",(0,s.jsx)(n.code,{children:"helloworld.py"})," will be generated.",(0,s.jsx)(n.br,{}),"\n","Replace its contents with the following code:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import rclpy                  # ROS 2 Python client library\r\nfrom rclpy.node import Node   # Base Node class\r\nimport time\r\n\r\n"""\r\nCreate a HelloWorld node and log \'Hello World\' periodically.\r\n"""\r\n\r\nclass HelloWorldNode(Node):\r\n    def __init__(self, name):\r\n        super().__init__(name)     # Initialize parent Node\r\n        while rclpy.ok():          # Keep running while ROS 2 is active\r\n            self.get_logger().info("Hello World")\r\n            time.sleep(0.5)        # Loop delay\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)          # Initialize ROS 2 system\r\n    node = HelloWorldNode("helloworld")\r\n    rclpy.spin(node)               # Keep node alive\r\n    node.destroy_node()            # Cleanup\r\n    rclpy.shutdown()               # Shutdown ROS 2\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Python Node File Structure",src:o(18788).A+"",width:"397",height:"246"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"adding-entry-points-in-setuppy",children:["Adding Entry Points in ",(0,s.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,s.jsxs)(n.p,{children:["Open the package's ",(0,s.jsx)(n.code,{children:"setup.py"})," and add:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"entry_points={\r\n    'console_scripts': [\r\n        'helloworld = pkg_helloworld_py.helloworld:main'\r\n    ],\r\n},\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Setup.py Entry Point",src:o(47066).A+"",width:"1036",height:"656"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"33-compiling-the-package",children:"3.3 Compiling the Package"}),"\n",(0,s.jsx)(n.p,{children:"Compile only the new package:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select pkg_helloworld_py\n"})}),"\n",(0,s.jsx)(n.p,{children:"Refresh the workspace environment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"34-running-the-node",children:"3.4 Running the Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run pkg_helloworld_py helloworld\n"})}),"\n",(0,s.jsx)(n.p,{children:"If successful, you will see recurring output:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Hello World Output",src:o(92904).A+"",width:"885",height:"242"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>t});var r=o(96540);const s={},l=r.createContext(s);function i(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(l.Provider,{value:n},e.children)}},47066:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/image-20231023172134879-951ada2cda8c055c481526ad292f8168.png"},92904:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/image-20231023163749024-d38aa2f77013186335a39e8b4127b853.png"}}]);