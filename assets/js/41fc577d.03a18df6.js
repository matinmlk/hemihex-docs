"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[6782],{18120:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20231030185328553-a1aefa6dda54f966037a5f94ee68ad34.png"},19143:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20231030190533095-92327342192df72f521d4612798758cd.png"},24607:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20250905150438440-d6f13638747802b409677737f46d1c40.png"},28453:(e,a,r)=>{r.d(a,{R:()=>i,x:()=>o});var n=r(96540);const t={},s=n.createContext(t);function i(e){const a=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(s.Provider,{value:a},e.children)}},43405:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20250905150404041-26c9aaf28bb07381a07723432305d163.png"},45719:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20231030182608893-3f54297ce92f68ab439e1a23a440662e.png"},47915:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-20231030182640039-c8cad1dac5bbd187468f72fb9fa02b19.png"},72424:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"Jetson/ROS2/ros2-parameter-service-case","title":"Parameter Service Case","description":"1. Introduction to Parameters","source":"@site/docs/Jetson/10 - ROS2/09-ros2-parameter-service-case.md","sourceDirName":"Jetson/10 - ROS2","slug":"/Jetson/ROS2/ros2-parameter-service-case","permalink":"/docs/Jetson/ROS2/ros2-parameter-service-case","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Jetson/10 - ROS2/09-ros2-parameter-service-case.md","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"title":"Parameter Service Case"},"sidebar":"tutorialSidebar","previous":{"title":"Service Communication","permalink":"/docs/Jetson/ROS2/ros2-service-communication"},"next":{"title":"Distributed Communication - Basics","permalink":"/docs/Jetson/ROS2/ros2-distributed-communication-basics"}}');var t=r(74848),s=r(28453);const i={sidebar_position:20,title:"Parameter Service Case"},o="11. ROS 2 Parameter Service Case",l={},d=[{value:"1. Introduction to Parameters",id:"1-introduction-to-parameters",level:2},{value:"2. Parameters in the Turtlesim Example",id:"2-parameters-in-the-turtlesim-example",level:2},{value:"Step 1: Start the Simulator and Keyboard Control",id:"step-1-start-the-simulator-and-keyboard-control",level:3},{value:"Step 2: View the Parameter List",id:"step-2-view-the-parameter-list",level:3},{value:"Step 3: Querying and Modifying Parameters",id:"step-3-querying-and-modifying-parameters",level:3},{value:"Step 4: Saving and Loading Parameter Files",id:"step-4-saving-and-loading-parameter-files",level:3},{value:"3. Parameter Programming Example",id:"3-parameter-programming-example",level:2},{value:"3.1 Create a New Function Package",id:"31-create-a-new-function-package",level:3},{value:"3.2 Code Implementation",id:"32-code-implementation",level:3},{value:"3.3 Compile the Package",id:"33-compile-the-package",level:3},{value:"3.4 Run the Program",id:"34-run-the-program",level:3}];function c(e){const a={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"11-ros-2-parameter-service-case",children:"11. ROS 2 Parameter Service Case"})}),"\n",(0,t.jsx)(a.h2,{id:"1-introduction-to-parameters",children:"1. Introduction to Parameters"}),"\n",(0,t.jsxs)(a.p,{children:["Parameters in ROS 2 are similar to ",(0,t.jsx)(a.strong,{children:"global variables"})," in C++\r\nprogramming. They allow data to be shared across multiple programs and\r\nnodes in the ROS system."]}),"\n",(0,t.jsxs)(a.p,{children:["In ROS, parameters exist in the form of a ",(0,t.jsx)(a.strong,{children:"global dictionary"}),". Like a\r\nreal dictionary, each parameter consists of a ",(0,t.jsx)(a.strong,{children:"key (name)"})," and a\r\n",(0,t.jsx)(a.strong,{children:"value"}),". Conceptually, this is similar to programming parameters:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-text",children:"parameter_name = parameter_value\n"})}),"\n",(0,t.jsx)(a.p,{children:"Once defined, parameters can be accessed directly by name."}),"\n",(0,t.jsx)(a.p,{children:"Parameters have powerful features: - One node can share parameters with\r\nother nodes. - If a node modifies a parameter, other nodes can\r\nimmediately obtain the updated value. - Parameters support dynamic\r\nreconfiguration at runtime."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"2-parameters-in-the-turtlesim-example",children:"2. Parameters in the Turtlesim Example"}),"\n",(0,t.jsx)(a.p,{children:"The turtlesim simulator provides a number of built-in parameters. This\r\nsection demonstrates how to inspect and modify parameters using\r\ncommand-line tools."}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:"The following examples assume a graphical environment with turtlesim\r\ninstalled."}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"step-1-start-the-simulator-and-keyboard-control",children:"Step 1: Start the Simulator and Keyboard Control"}),"\n",(0,t.jsx)(a.p,{children:"Open two terminals and run:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\r\nros2 run turtlesim turtle_teleop_key\n"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Turtlesim Running",src:r(45719).A+"",width:"1551",height:"911"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"step-2-view-the-parameter-list",children:"Step 2: View the Parameter List"}),"\n",(0,t.jsx)(a.p,{children:"Open another terminal and list all available parameters:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 param list\n"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Parameter List",src:r(47915).A+"",width:"496",height:"414"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"step-3-querying-and-modifying-parameters",children:"Step 3: Querying and Modifying Parameters"}),"\n",(0,t.jsx)(a.p,{children:"Use the following commands to inspect and modify parameters:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 param describe turtlesim background_b   # View parameter description\r\nros2 param get turtlesim background_b        # Query parameter value\r\nros2 param set turtlesim background_b 10     # Modify parameter value\n"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"step-4-saving-and-loading-parameter-files",children:"Step 4: Saving and Loading Parameter Files"}),"\n",(0,t.jsxs)(a.p,{children:["Managing parameters individually can be inefficient. ROS 2 supports\r\n",(0,t.jsx)(a.strong,{children:"YAML-based parameter files"}),"."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 param dump turtlesim >> turtlesim.yaml   # Save parameters to file\r\nros2 param load turtlesim turtlesim.yaml      # Load parameters from file\n"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"3-parameter-programming-example",children:"3. Parameter Programming Example"}),"\n",(0,t.jsx)(a.h3,{id:"31-create-a-new-function-package",children:"3.1 Create a New Function Package"}),"\n",(0,t.jsx)(a.p,{children:"Create a new package for parameter testing:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 pkg create pkg_param --build-type ament_python --dependencies rclpy --node-name param_demo\n"})}),"\n",(0,t.jsxs)(a.p,{children:["After execution, the ",(0,t.jsx)(a.code,{children:"pkg_param"})," package and ",(0,t.jsx)(a.code,{children:"param_demo"})," node will be\r\ncreated."]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Package Structure",src:r(18120).A+"",width:"1060",height:"767"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"32-code-implementation",children:"3.2 Code Implementation"}),"\n",(0,t.jsxs)(a.p,{children:["Edit the ",(0,t.jsx)(a.code,{children:"param_demo.py"})," file and add the following code:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"import rclpy                # ROS 2 Python interface library\r\nfrom rclpy.node import Node # ROS 2 Node class\r\n\r\nclass ParameterNode(Node):\r\n    def __init__(self, name):\r\n        super().__init__(name)\r\n\r\n        # Create a timer (period in seconds, callback executed periodically)\r\n        self.timer = self.create_timer(2, self.timer_callback)\r\n\r\n        # Declare a parameter and set its default value\r\n        self.declare_parameter('robot_name', 'muto')\r\n\r\n    def timer_callback(self):\r\n        # Read parameter value from the ROS 2 system\r\n        robot_name_param = (\r\n            self.get_parameter('robot_name')\r\n            .get_parameter_value()\r\n            .string_value\r\n        )\r\n\r\n        # Output parameter value\r\n        self.get_logger().info('Hello %s!' % robot_name_param)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)                 # Initialize ROS 2 Python interface\r\n    node = ParameterNode(\"param_declare\") # Create node\r\n    rclpy.spin(node)                      # Keep node running\r\n    node.destroy_node()                  # Destroy node\r\n    rclpy.shutdown()                     # Shutdown ROS 2\n"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"33-compile-the-package",children:"3.3 Compile the Package"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"colcon build --packages-select pkg_param\n"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Build Result",src:r(43405).A+"",width:"809",height:"243"})}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h3,{id:"34-run-the-program",children:"3.4 Run the Program"}),"\n",(0,t.jsx)(a.p,{children:"Refresh the environment and run the node:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"source install/setup.bash\r\nros2 run pkg_param param_demo\n"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Program Running",src:r(24607).A+"",width:"816",height:"174"})}),"\n",(0,t.jsx)(a.p,{children:"Open another terminal and modify the parameter value:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"ros2 param set param_declare robot_name Robot\n"})}),"\n",(0,t.jsxs)(a.p,{children:["You will see the log output update dynamically.",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.code,{children:'"muto"'})," is the default value of ",(0,t.jsx)(a.code,{children:"robot_name"}),", and it changes\r\nimmediately after setting a new value."]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Parameter Change Output",src:r(19143).A+"",width:"981",height:"564"})})]})}function m(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);