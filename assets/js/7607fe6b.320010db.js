"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[2708],{28453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>r});var o=n(96540);const l={},a=o.createContext(l);function t(e){const i=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),o.createElement(a.Provider,{value:i},e.children)}},32867:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-13","title":"Multimodal Video Analysis Application","description":"1. Concept Introduction","source":"@site/docs/hh101/HH-101/11 - Offline AI Model/13-multimodal-video-analysis-application-11-offlineaimodel-11-13.md","sourceDirName":"HH-101/11 - Offline AI Model","slug":"/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-13","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-video-analysis-application-11-offlineaimodel-11-13","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Multimodal Video Analysis Application","sidebar_position":0},"sidebar":"hh101Sidebar","previous":{"title":"Multimodal Text Image Application","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-text-image-application-11-offlineaimodel-11-12"},"next":{"title":"Multi-module Visual Position Application","permalink":"/hh-101/HH-101/Offline AI Model/multi-module-visual-position-application-11-offlineaimodel-11-14"}}');var l=n(74848),a=n(28453);const t={title:"Multimodal Video Analysis Application",sidebar_position:0},r="Multimodal Video Analysis Application",s={},d=[{value:"1. Concept Introduction",id:"1-concept-introduction",level:2},{value:"1.1 What is &quot;Video Analysis&quot;?",id:"11-what-is-video-analysis",level:3},{value:"1.2 Implementation Principles",id:"12-implementation-principles",level:3},{value:"2. Code Analysis",id:"2-code-analysis",level:2},{value:"Key Code",id:"key-code",level:3},{value:"1. Tool Layer Entry ( largemodel/utils/tools_manager.py )",id:"1-tool-layer-entry--largemodelutilstools_managerpy-",level:4},{value:"2. Model Interface Layer and Frame Extraction ( largemodel/utils/large_model_interface.py )",id:"2-model-interface-layer-and-frame-extraction--largemodelutilslarge_model_interfacepy-",level:4},{value:"Code Analysis",id:"code-analysis",level:3},{value:"3. Practical Operations",id:"3-practical-operations",level:2},{value:"3.1 Configuring the Offline Large Model",id:"31-configuring-the-offline-large-model",level:3},{value:"3.1.1 Configuring the LLM Platform (HemiHex.yaml)",id:"311-configuring-the-llm-platform-hemihexyaml",level:4},{value:"3.1.2 Configuring the Model Interface ( large_model_interface.yaml )",id:"312-configuring-the-model-interface--large_model_interfaceyaml-",level:4},{value:"3.2 Starting and Testing the Feature (Text Input Mode)",id:"32-starting-and-testing-the-feature-text-input-mode",level:3},{value:"4. Common Problems and Solutions",id:"4-common-problems-and-solutions",level:2},{value:"Problem 1: Error message &quot;Video file not found&quot; or &quot;Unable to extract keyframes from video.&quot;",id:"problem-1-error-message-video-file-not-found-or-unable-to-extract-keyframes-from-video",level:4},{value:"Problem 2: Analyzing a long video is time-consuming.",id:"problem-2-analyzing-a-long-video-is-time-consuming",level:4}];function c(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.header,{children:(0,l.jsx)(i.h1,{id:"multimodal-video-analysis-application",children:"Multimodal Video Analysis Application"})}),"\n",(0,l.jsx)(i.h2,{id:"1-concept-introduction",children:"1. Concept Introduction"}),"\n",(0,l.jsx)(i.h3,{id:"11-what-is-video-analysis",children:'1.1 What is "Video Analysis"?'}),"\n",(0,l.jsx)(i.p,{children:"In the largemodel project, the multimodal video analysis feature enables a robot to process a video and summarize its core content, describe key events, or answer specific questions about the video in natural language. This allows the robot to leap from understanding only static images to understanding the dynamic and temporal world."}),"\n",(0,l.jsx)(i.p,{children:'The core tool for this feature is **analyze_video`. When a user provides a video file and asks a question (such as "Summarize what this video says"), the system invokes this tool to process and analyze the video and return a textual response from the AI.'}),"\n",(0,l.jsx)(i.h3,{id:"12-implementation-principles",children:"1.2 Implementation Principles"}),"\n",(0,l.jsx)(i.p,{children:"The core challenge of offline video analysis lies in how to efficiently process video data containing hundreds or thousands of frames. A popular implementation principle is as follows:"}),"\n",(0,l.jsx)(i.p,{children:"Simply put, it condenses a video into a few key images and their sequence, allowing users to understand the entire story like reading a comic strip and answer related questions."}),"\n",(0,l.jsx)(i.h2,{id:"2-code-analysis",children:"2. Code Analysis"}),"\n",(0,l.jsx)(i.h3,{id:"key-code",children:"Key Code"}),"\n",(0,l.jsx)(i.h4,{id:"1-tool-layer-entry--largemodelutilstools_managerpy-",children:"1. Tool Layer Entry ( largemodel/utils/tools_manager.py )"}),"\n",(0,l.jsx)(i.p,{children:"The analyze_video function in this file defines the tool's execution flow."}),"\n",(0,l.jsx)(i.p,{children:"[TODO3]"}),"\n",(0,l.jsx)(i.h4,{id:"2-model-interface-layer-and-frame-extraction--largemodelutilslarge_model_interfacepy-",children:"2. Model Interface Layer and Frame Extraction ( largemodel/utils/large_model_interface.py )"}),"\n",(0,l.jsx)(i.p,{children:"The functions in this file are responsible for processing video files and passing them to the underlying model."}),"\n",(0,l.jsx)(i.p,{children:"[TODO4]"}),"\n",(0,l.jsx)(i.h3,{id:"code-analysis",children:"Code Analysis"}),"\n",(0,l.jsx)(i.p,{children:"The implementation of video analysis is more complex than image analysis. It requires a key preprocessing step at the model interface layer: frame extraction."}),"\n",(0,l.jsx)(i.p,{children:"In summary, the general process of video analysis is: ToolsManager initiates an analysis request -> model_interface intercepts the request and calls _extract_video_frames to decompose the video file into multiple keyframe images -> model_interface sends these images, along with analysis instructions, to the corresponding model platform according to the configuration -> the model returns a comprehensive description of the video -> the results are finally returned to ToolsManager . This design ensures the stability and versatility of upper-layer applications."}),"\n",(0,l.jsx)(i.h2,{id:"3-practical-operations",children:"3. Practical Operations"}),"\n",(0,l.jsx)(i.h3,{id:"31-configuring-the-offline-large-model",children:"3.1 Configuring the Offline Large Model"}),"\n",(0,l.jsx)(i.h4,{id:"311-configuring-the-llm-platform-hemihexyaml",children:"3.1.1 Configuring the LLM Platform (HemiHex.yaml)"}),"\n",(0,l.jsx)(i.p,{children:"This file determines which large model platform the model_service node loads as its primary language model."}),"\n",(0,l.jsx)(i.p,{children:"Open the file in the terminal :"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-bash",children:"vim ~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,l.jsx)(i.p,{children:"Modify/confirm llm_platform :"}),"\n",(0,l.jsx)(i.p,{children:"[TODO5]"}),"\n",(0,l.jsx)(i.h4,{id:"312-configuring-the-model-interface--large_model_interfaceyaml-",children:"3.1.2 Configuring the Model Interface ( large_model_interface.yaml )"}),"\n",(0,l.jsx)(i.p,{children:"This file defines which visual model to use when the ollama platform is selected."}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-bash",children:"\r\nvim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(i.p,{children:"[TODO6]"}),"\n",(0,l.jsx)(i.p,{children:"Note : Please ensure that the model specified in the configuration parameters (e.g., llava ) can handle multimodal input."}),"\n",(0,l.jsx)(i.h3,{id:"32-starting-and-testing-the-feature-text-input-mode",children:"3.2 Starting and Testing the Feature (Text Input Mode)"}),"\n",(0,l.jsx)(i.admonition,{type:"warning",children:(0,l.jsx)(i.p,{children:"Due to performance limitations, the Jetson Orin Nano 4GB may not perform well. To experience this feature, please refer to the corresponding section in [Online Large Model (Text Interaction)]"})}),"\n",(0,l.jsx)(i.p,{children:"Prepare video files :"}),"\n",(0,l.jsx)(i.p,{children:"Place a video file to test in the following path: /home/jetson/yahboom_ws/src/largemodel/resources_file/analyze_video"}),"\n",(0,l.jsx)(i.p,{children:"Then name the video test_video.mp4"}),"\n",(0,l.jsx)(i.p,{children:"Start the largemodel main program (in text mode):"}),"\n",(0,l.jsx)(i.p,{children:"Open a terminal and run the following command:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-bash",children:"\r\nros2 launch largemodel largemodel_control.launch.py text_chat_mode:=true\n"})}),"\n",(0,l.jsx)(i.p,{children:"Send text command : Open another terminal again and run the following command,"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-bash",children:"ros2 run text_chat text_chat\n"})}),"\n",(0,l.jsx)(i.p,{children:'Then start typing text: "Analyze this video."'}),"\n",(0,l.jsx)(i.p,{children:"Observation results : In the first terminal running the main program, you will see log output showing that the system received the command, called the analyze_video tool, extracted the keyframes, and finally printed out the AI's summary of the video content."}),"\n",(0,l.jsx)(i.h2,{id:"4-common-problems-and-solutions",children:"4. Common Problems and Solutions"}),"\n",(0,l.jsx)(i.h4,{id:"problem-1-error-message-video-file-not-found-or-unable-to-extract-keyframes-from-video",children:'Problem 1: Error message "Video file not found" or "Unable to extract keyframes from video."'}),"\n",(0,l.jsx)(i.p,{children:"Solution :"}),"\n",(0,l.jsx)(i.h4,{id:"problem-2-analyzing-a-long-video-is-time-consuming",children:"Problem 2: Analyzing a long video is time-consuming."}),"\n",(0,l.jsx)(i.p,{children:"Solution :"})]})}function m(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);