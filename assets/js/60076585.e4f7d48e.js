"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[4012],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var o=i(96540);const l={},a=o.createContext(l);function r(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),o.createElement(a.Provider,{value:n},e.children)}},35702:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"HH-101/Offline AI Model/offline-speech-to-text-asr-11-offlineaimodel-11-18","title":"Offline Speech to Text (ASR)","description":"1. Introduction","source":"@site/docs/hh101/HH-101/11 - Offline AI Model/18-offline-speech-to-text-asr-11-offlineaimodel-11-18.md","sourceDirName":"HH-101/11 - Offline AI Model","slug":"/HH-101/Offline AI Model/offline-speech-to-text-asr-11-offlineaimodel-11-18","permalink":"/hh-101/HH-101/Offline AI Model/offline-speech-to-text-asr-11-offlineaimodel-11-18","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Offline Speech to Text (ASR)","sidebar_position":0},"sidebar":"hh101Sidebar","previous":{"title":"Multimodal Autonomous Agent Application","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-autonomous-agent-application-11-offlineaimodel-11-16"},"next":{"title":"Offline Text to Speech (TTS)","permalink":"/hh-101/HH-101/Offline AI Model/offline-text-to-speech-tts-11-offlineaimodel-11-19"}}');var l=i(74848),a=i(28453);const r={title:"Offline Speech to Text (ASR)",sidebar_position:0},s="1.Offline speech to text (ASR)",t={},c=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"1.1 What is &quot;ASR&quot;?",id:"11-what-is-asr",level:3},{value:"1.2 Implementation Principles",id:"12-implementation-principles",level:3},{value:"1. Acoustic Model",id:"1-acoustic-model",level:4},{value:"2. Language Model",id:"2-language-model",level:4},{value:"3. Pronunciation Dictionary",id:"3-pronunciation-dictionary",level:4},{value:"4. Decoder",id:"4-decoder",level:4},{value:"5. End-to-End ASR",id:"5-end-to-end-asr",level:4},{value:"2. Code Analysis",id:"2-code-analysis",level:2},{value:"Key Code",id:"key-code",level:3},{value:"1. Speech Processing and Recognition Core ( largemodel/largemodel/asr.py )",id:"1-speech-processing-and-recognition-core--largemodellargemodelasrpy-",level:4},{value:"Code Analysis",id:"code-analysis",level:3},{value:"3. Practical Operations",id:"3-practical-operations",level:2},{value:"3.1 Configuring Offline ASR",id:"31-configuring-offline-asr",level:3},{value:"3.2 Start and test the functionality",id:"32-start-and-test-the-functionality",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"1offline-speech-to-text-asr",children:"1.Offline speech to text (ASR)"})}),"\n",(0,l.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,l.jsx)(n.h3,{id:"11-what-is-asr",children:'1.1 What is "ASR"?'}),"\n",(0,l.jsx)(n.p,{children:'ASR (Automatic Speech Recognition) is a technology that converts human speech signals into text. It is widely used in intelligent assistants, voice command control, telephone customer service automation, and real-time subtitle generation. The goal of ASR is to enable machines to "understand" human speech and convert it into a form that computers can process and understand.'}),"\n",(0,l.jsx)(n.h3,{id:"12-implementation-principles",children:"1.2 Implementation Principles"}),"\n",(0,l.jsx)(n.p,{children:"The implementation of an ASR system relies primarily on the following key technical components:"}),"\n",(0,l.jsx)(n.h4,{id:"1-acoustic-model",children:"1. Acoustic Model"}),"\n",(0,l.jsx)(n.h4,{id:"2-language-model",children:"2. Language Model"}),"\n",(0,l.jsx)(n.h4,{id:"3-pronunciation-dictionary",children:"3. Pronunciation Dictionary"}),"\n",(0,l.jsx)(n.h4,{id:"4-decoder",children:"4. Decoder"}),"\n",(0,l.jsx)(n.h4,{id:"5-end-to-end-asr",children:"5. End-to-End ASR"}),"\n",(0,l.jsx)(n.p,{children:"In general, modern ASR systems achieve efficient and accurate speech-to-text conversion by combining the aforementioned components and leveraging large datasets and powerful computing resources for training. With technological advances, the performance of ASR systems continues to improve, and their application scenarios are becoming increasingly broad."}),"\n",(0,l.jsx)(n.p,{children:"--"}),"\n",(0,l.jsx)(n.h2,{id:"2-code-analysis",children:"2. Code Analysis"}),"\n",(0,l.jsx)(n.h3,{id:"key-code",children:"Key Code"}),"\n",(0,l.jsx)(n.h4,{id:"1-speech-processing-and-recognition-core--largemodellargemodelasrpy-",children:"1. Speech Processing and Recognition Core ( largemodel/largemodel/asr.py )"}),"\n",(0,l.jsx)(n.p,{children:"[TODO]"}),"\n",(0,l.jsx)(n.h3,{id:"code-analysis",children:"Code Analysis"}),"\n",(0,l.jsx)(n.p,{children:"ASR (speech-to-text) functionality is provided by the ASRNode node ( asr.py ). This node is responsible for recording, converting, and publishing audio."}),"\n",(0,l.jsx)(n.h2,{id:"3-practical-operations",children:"3. Practical Operations"}),"\n",(0,l.jsx)(n.h3,{id:"31-configuring-offline-asr",children:"3.1 Configuring Offline ASR"}),"\n",(0,l.jsx)(n.p,{children:"To enable offline ASR, you need to correctly configure the HemiHex.yaml file and ensure that the local model is correctly placed."}),"\n",(0,l.jsx)(n.p,{children:"Open the configuration file :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"vim\r\n~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"vim\r\n~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"Modify/confirm the following key configuration :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"asr\r\n:\r\n#Voice node parameters\r\nros__parameters\r\n:\r\n# ...\r\nuse_oline_asr\r\n:\r\nFalse\r\n# KEY: Must be set to False to enable offline ASR\r\nmic_serial_port\r\n:\r\n\"/dev/ttyUSB0\"\r\n# Microphone serial port alias\r\nmic_index\r\n:\r\n0\r\n# Microphone Device Index\r\nlanguage\r\n:\r\n'en'\r\n# asr language, 'zh' or 'en'\r\nregional_setting\r\n:\r\n\"international\"\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"asr\r\n:\r\n#Voice node parameters\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"ros__parameters\r\n:\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# ...\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"use_oline_asr\r\n:\r\nFalse\r\n# KEY: Must be set to False to enable offline ASR\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'mic_serial_port\r\n:\r\n"/dev/ttyUSB0"\r\n# Microphone serial port alias\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"mic_index\r\n:\r\n0\r\n# Microphone Device Index\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"language\r\n:\r\n'en'\r\n# asr language, 'zh' or 'en'\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'regional_setting\r\n:\r\n"international"\n'})}),"\n",(0,l.jsx)(n.p,{children:"Make sure use_oline_asr is set to False to use the local model."}),"\n",(0,l.jsx)(n.p,{children:"In the terminal, enter ls /dev/ttyUSB* to check if the USB device number assigned to the voice module is USB0. If not, replace the 0 in the configuration file with your desired device number."}),"\n",(0,l.jsx)(n.p,{children:'Select "zh" for Chinese and "en" for English.'}),"\n",(0,l.jsx)(n.p,{children:"Also, specify the path to the offline model in large_model_interface.yaml ."}),"\n",(0,l.jsx)(n.p,{children:"Open the file in the terminal:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"vim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"vim ~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"Find the configuration related to local_asr_model ."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# large_model_interface.yaml\r\n## \u79bb\u7ebf\u8bed\u97f3\u8bc6\u522b (Offline ASR)\r\nlocal_asr_model\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/asr/SenseVoiceSmall"\r\n# Local ASR model path\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# large_model_interface.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"## \u79bb\u7ebf\u8bed\u97f3\u8bc6\u522b (Offline ASR)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'local_asr_model\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/asr/SenseVoiceSmall"\r\n# Local ASR model path\n'})}),"\n",(0,l.jsx)(n.h3,{id:"32-start-and-test-the-functionality",children:"3.2 Start and test the functionality"}),"\n",(0,l.jsx)(n.p,{children:"Startup Command :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"ros2 launch largemodel asr_only.launch.py\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"ros2 launch largemodel asr_only.launch.py\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"image-20250807154240917",src:i(85946).A+"",width:"901",height:"120"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},85946:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/1-dac20ccff5c2847f8a09afc4e4121f65.png"}}]);