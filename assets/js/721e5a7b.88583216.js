"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[4775],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(96540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},82995:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"ROS2/ros2-dds","title":"DDS","description":"1. Introduction to DDS","source":"@site/docs/10 - ROS2/12-ros2-dds.md","sourceDirName":"10 - ROS2","slug":"/ROS2/ros2-dds","permalink":"/docs/ROS2/ros2-dds","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/10 - ROS2/12-ros2-dds.md","tags":[],"version":"current","sidebarPosition":24,"frontMatter":{"sidebar_position":24,"title":"DDS"},"sidebar":"tutorialSidebar","previous":{"title":"Distributed Communication - Domain Rules","permalink":"/docs/ROS2/ros2-distributed-communication-domain-rules"},"next":{"title":"Common Command Tools","permalink":"/docs/ROS2/ros2-common-command-tools"}}');var r=s(74848),o=s(28453);const l={sidebar_position:24,title:"DDS"},t="14. ROS 2 DDS",c={},a=[{value:"1. Introduction to DDS",id:"1-introduction-to-dds",level:2},{value:"References",id:"references",level:3},{value:"2. Communication Model",id:"2-communication-model",level:2},{value:"1. Peer-to-Peer Model",id:"1-peer-to-peer-model",level:3},{value:"2. Broker Model",id:"2-broker-model",level:3},{value:"3. Broadcast Model",id:"3-broadcast-model",level:3},{value:"4. DDS Data-Centric Model",id:"4-dds-data-centric-model",level:3},{value:"3. Application of DDS in ROS 2",id:"3-application-of-dds-in-ros-2",level:2},{value:"4. Quality of Service (QoS)",id:"4-quality-of-service-qos",level:2},{value:"Domain Concept",id:"domain-concept",level:3},{value:"Core QoS Policies",id:"core-qos-policies",level:3},{value:"5. Test Cases",id:"5-test-cases",level:2},{value:"5.1 Case 1 --- Command-Line DDS QoS Configuration",id:"51-case-1-----command-line-dds-qos-configuration",level:3},{value:"Publisher Terminal",id:"publisher-terminal",level:4},{value:"Subscriber Terminal (Mismatched QoS)",id:"subscriber-terminal-mismatched-qos",level:4},{value:"Correct Matching QoS",id:"correct-matching-qos",level:4},{value:"5.2 Case 2 --- Configuring QoS in Topic Nodes",id:"52-case-2-----configuring-qos-in-topic-nodes",level:3},{value:"Step 1: Create Package",id:"step-1-create-package",level:4},{value:"Publisher Node (<code>dds_controller_pub.py</code>)",id:"publisher-node-dds_controller_pubpy",level:3}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"14-ros-2-dds",children:"14. ROS 2 DDS"})}),"\n",(0,r.jsx)(n.h2,{id:"1-introduction-to-dds",children:"1. Introduction to DDS"}),"\n",(0,r.jsxs)(n.p,{children:["DDS stands for ",(0,r.jsx)(n.strong,{children:"Data Distribution Service"}),". It is a real-time,\ndata-centric publish/subscribe communication standard released by the\n",(0,r.jsx)(n.strong,{children:"Object Management Group (OMG)"})," in 2004."]}),"\n",(0,r.jsx)(n.p,{children:"DDS was initially adopted by the U.S. Navy to address large-scale\ndistributed system communication challenges and has since become a\nwidely used real-time communication standard."}),"\n",(0,r.jsx)(n.p,{children:"DDS emphasizes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Data-centric communication"}),"\n",(0,r.jsx)(n.li,{children:"High-performance real-time transmission"}),"\n",(0,r.jsxs)(n.li,{children:["Flexible ",(0,r.jsx)(n.strong,{children:"Quality of Service (QoS)"})," control"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Fast DDS Documentation:",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"https://fast-dds.docs.eprosima.com/en/latest/",children:"https://fast-dds.docs.eprosima.com/en/latest/"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["ROS 2 DDS Advanced Functions:",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Advanced/Discovery-Server/Discovery-Server.html",children:"https://docs.ros.org/en/humble/Tutorials/Advanced/Discovery-Server/Discovery-Server.html"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-communication-model",children:"2. Communication Model"}),"\n",(0,r.jsxs)(n.p,{children:["Topics, services, and actions in ROS 2 are all implemented on top of\nDDS. DDS acts as the ",(0,r.jsx)(n.strong,{children:"communication backbone"})," of the ROS 2 system."]}),"\n",(0,r.jsx)(n.p,{children:"Four common communication models are:"}),"\n",(0,r.jsx)(n.h3,{id:"1-peer-to-peer-model",children:"1. Peer-to-Peer Model"}),"\n",(0,r.jsx)(n.p,{children:"Each client directly connects to the server. As the number of nodes\nincreases, the number of connections increases rapidly."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Disadvantages:"})," - Poor scalability - Hardcoded server addresses -\nHigh maintenance cost"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-broker-model",children:"2. Broker Model"}),"\n",(0,r.jsx)(n.p,{children:"A central broker forwards all messages between nodes."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Disadvantages:"})," - Performance bottleneck - Single point of failure"]}),"\n",(0,r.jsx)(n.p,{children:"ROS 1 used a similar centralized architecture."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-broadcast-model",children:"3. Broadcast Model"}),"\n",(0,r.jsx)(n.p,{children:"All nodes broadcast and receive messages on the same channel."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Disadvantages:"})," - All nodes receive all messages - Heavy traffic and\nfiltering overhead"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-dds-data-centric-model",children:"4. DDS Data-Centric Model"}),"\n",(0,r.jsxs)(n.p,{children:["DDS uses a ",(0,r.jsx)(n.strong,{children:"DataBus"})," where nodes only subscribe to the data they need."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Advantages:"})," - Parallel communication paths - High scalability -\nEfficient filtering - No central broker"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-application-of-dds-in-ros-2",children:"3. Application of DDS in ROS 2"}),"\n",(0,r.jsxs)(n.p,{children:["DDS is the ",(0,r.jsx)(n.strong,{children:"core infrastructure layer"})," of ROS 2."]}),"\n",(0,r.jsx)(n.p,{children:"All ROS 2 communication mechanisms rely on DDS for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Discovery"}),"\n",(0,r.jsx)(n.li,{children:"Transport"}),"\n",(0,r.jsx)(n.li,{children:"Reliability"}),"\n",(0,r.jsx)(n.li,{children:"Data synchronization"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This design allows developers to focus on application logic instead of\nnetworking."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-quality-of-service-qos",children:"4. Quality of Service (QoS)"}),"\n",(0,r.jsx)(n.h3,{id:"domain-concept",children:"Domain Concept"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"DDS Domain"})," defines a logical communication space. Only nodes\nwithin the ",(0,r.jsx)(n.strong,{children:"same domain"})," can communicate."]}),"\n",(0,r.jsx)(n.p,{children:"This is controlled via:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export ROS_DOMAIN_ID=0\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"core-qos-policies",children:"Core QoS Policies"}),"\n",(0,r.jsx)(n.p,{children:"Policy        Description"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"DEADLINE      Data must be transmitted within a time limit\nHISTORY       Number of historical messages stored\nRELIABILITY   BEST_EFFORT vs RELIABLE\nDURABILITY    Allow late-joining nodes to receive historical data"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-test-cases",children:"5. Test Cases"}),"\n",(0,r.jsx)(n.h3,{id:"51-case-1-----command-line-dds-qos-configuration",children:"5.1 Case 1 --- Command-Line DDS QoS Configuration"}),"\n",(0,r.jsx)(n.h4,{id:"publisher-terminal",children:"Publisher Terminal"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub /chatter std_msgs/msg/Int32 "data: 66" --qos-reliability best_effort\n'})}),"\n",(0,r.jsx)(n.h4,{id:"subscriber-terminal-mismatched-qos",children:"Subscriber Terminal (Mismatched QoS)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /chatter --qos-reliability reliable\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u26a0\ufe0f A warning will appear due to mismatched QoS."}),"\n",(0,r.jsx)(n.h4,{id:"correct-matching-qos",children:"Correct Matching QoS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /chatter --qos-reliability best_effort\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u2705 Data will now be received correctly."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"52-case-2-----configuring-qos-in-topic-nodes",children:"5.2 Case 2 --- Configuring QoS in Topic Nodes"}),"\n",(0,r.jsx)(n.h4,{id:"step-1-create-package",children:"Step 1: Create Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create learning_dds --build-type ament_python --dependencies rclpy std_msgs\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h3,{id:"publisher-node-dds_controller_pubpy",children:["Publisher Node (",(0,r.jsx)(n.code,{children:"dds_controller_pub.py"}),")"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom rclpy.qos import QoSProfile, QoSReliabilityPolicy, QoSHistoryPolicy\n\nclass ControllerPublisher(Node):\n\n    def __init__(self, name):\n        super().__init__(name)\n\n        self.qos_profile = QoSProfile(\n            reliability=QoSReliabilityPolicy.RELIABLE,\n            history=QoSHistoryPolicy.KEEP_LAST,\n            depth=1\n        )\n\n        self.publisher = self.create_publisher(\n            String,\n            "/robot_cmd",\n            self.qos_profile\n        )\n\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.cmd_list = ["forward", "backward", "stop"]\n        self.cmd_index = 0\n\n    def timer_callback(self):\n        current_cmd = self.cmd_list[self.cmd_index % 3]\n\n        msg = String()\n        msg.data = current_cmd\n\n        self.publisher.publish(msg)\n        self.get_logger().info(f"Command Sent: {msg.data}")\n\n        self.cmd_index += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ControllerPublisher("robot_controller_pub")\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"\u2705 This completes DDS-based QoS-controlled communication in ROS 2."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);