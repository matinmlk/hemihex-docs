"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[9503],{12598:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image-20250807155119783-ba33c21fed815f2d9ccfbc7007801172.png"},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const t={},l=i.createContext(t);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(l.Provider,{value:n},e.children)}},41291:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/1-debc26807a5b70dc0348bdae8180cd07.png"},44832:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"HH-101/Offline AI Model/offline-text-to-speech-tts-11-offlineaimodel-11-19","title":"Offline Text to Speech (TTS)","description":"1. Concept Introduction","source":"@site/docs/hh101/HH-101/11 - Offline AI Model/19-offline-text-to-speech-tts-11-offlineaimodel-11-19.md","sourceDirName":"HH-101/11 - Offline AI Model","slug":"/HH-101/Offline AI Model/offline-text-to-speech-tts-11-offlineaimodel-11-19","permalink":"/hh-101/HH-101/Offline AI Model/offline-text-to-speech-tts-11-offlineaimodel-11-19","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Offline Text to Speech (TTS)","sidebar_position":0},"sidebar":"hh101Sidebar","previous":{"title":"Offline Speech to Text (ASR)","permalink":"/hh-101/HH-101/Offline AI Model/offline-speech-to-text-asr-11-offlineaimodel-11-18"},"next":{"title":"Multimodal Visual Understanding Speech Interaction","permalink":"/hh-101/HH-101/Offline AI Model/multimodal-visual-understanding-speech-interaction-11-offlineaimodel-11-20"}}');var t=s(74848),l=s(28453);const o={title:"Offline Text to Speech (TTS)",sidebar_position:0},a="2.Offline text to speech (TTS)",r={},c=[{value:"1. Concept Introduction",id:"1-concept-introduction",level:2},{value:"1.1 What is &quot;TTS&quot;?",id:"11-what-is-tts",level:3},{value:"1.2 Overview of Implementation Principles",id:"12-overview-of-implementation-principles",level:3},{value:"1. Text Analysis",id:"1-text-analysis",level:4},{value:"2. Language Processing",id:"2-language-processing",level:4},{value:"3. Speech Synthesis",id:"3-speech-synthesis",level:4},{value:"4. Sound Waveform Generation",id:"4-sound-waveform-generation",level:4},{value:"2. Code Analysis",id:"2-code-analysis",level:3},{value:"Key Code",id:"key-code",level:3},{value:"1. TTS Initialization and Invocation ( largemodel/largemodel/model_service.py )",id:"1-tts-initialization-and-invocation--largemodellargemodelmodel_servicepy-",level:4},{value:"2. TTS backend implementation ( largemodel/utils/large_model_interface.py )",id:"2-tts-backend-implementation--largemodelutilslarge_model_interfacepy-",level:4},{value:"Code Analysis",id:"code-analysis",level:3},{value:"3. Practical Operations",id:"3-practical-operations",level:2},{value:"3.1 Configuring Offline TTS",id:"31-configuring-offline-tts",level:3},{value:"3.2 Start and test the functionality",id:"32-start-and-test-the-functionality",level:3},{value:"4. Common Problems and Solutions",id:"4-common-problems-and-solutions",level:2},{value:"4.1 Playback Issues",id:"41-playback-issues",level:3},{value:"Issue 1: The program runs normally without errors, but no sound is heard.",id:"issue-1-the-program-runs-normally-without-errors-but-no-sound-is-heard",level:4}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"2offline-text-to-speech-tts",children:"2.Offline text to speech (TTS)"})}),"\n",(0,t.jsx)(n.h2,{id:"1-concept-introduction",children:"1. Concept Introduction"}),"\n",(0,t.jsx)(n.h3,{id:"11-what-is-tts",children:'1.1 What is "TTS"?'}),"\n",(0,t.jsx)(n.p,{children:'TTS technology converts written text into human-readable speech output. It enables computers to "read" text aloud and is widely used in a variety of fields, including accessible reading, intelligent assistants, navigation systems, and educational software. Through TTS, users can hear natural, fluent machine-generated human voices, greatly improving the convenience and flexibility of information acquisition.'}),"\n",(0,t.jsx)(n.h3,{id:"12-overview-of-implementation-principles",children:"1.2 Overview of Implementation Principles"}),"\n",(0,t.jsx)(n.p,{children:"The implementation of a TTS system primarily involves the following key steps and technologies:"}),"\n",(0,t.jsx)(n.h4,{id:"1-text-analysis",children:"1. Text Analysis"}),"\n",(0,t.jsx)(n.h4,{id:"2-language-processing",children:"2. Language Processing"}),"\n",(0,t.jsx)(n.h4,{id:"3-speech-synthesis",children:"3. Speech Synthesis"}),"\n",(0,t.jsx)(n.h4,{id:"4-sound-waveform-generation",children:"4. Sound Waveform Generation"}),"\n",(0,t.jsx)(n.p,{children:"With the advancement of artificial intelligence and machine learning technologies, especially the application of deep learning, TTS systems have not only significantly improved in accuracy but also made significant progress in naturalness and emotional expression, making machine-generated speech increasingly similar to human voices."}),"\n",(0,t.jsx)(n.h3,{id:"2-code-analysis",children:"2. Code Analysis"}),"\n",(0,t.jsx)(n.h3,{id:"key-code",children:"Key Code"}),"\n",(0,t.jsx)(n.h4,{id:"1-tts-initialization-and-invocation--largemodellargemodelmodel_servicepy-",children:"1. TTS Initialization and Invocation ( largemodel/largemodel/model_service.py )"}),"\n",(0,t.jsx)(n.p,{children:"[TODO]"}),"\n",(0,t.jsx)(n.h4,{id:"2-tts-backend-implementation--largemodelutilslarge_model_interfacepy-",children:"2. TTS backend implementation ( largemodel/utils/large_model_interface.py )"}),"\n",(0,t.jsx)(n.p,{children:"[TODO]"}),"\n",(0,t.jsx)(n.h3,{id:"code-analysis",children:"Code Analysis"}),"\n",(0,t.jsx)(n.p,{children:"The text-to-speech (TTS) function is invoked by the LargeModelService node and implemented by the model_interface class. Its design uses parameter configuration to switch between different backend services."}),"\n",(0,t.jsx)(n.h2,{id:"3-practical-operations",children:"3. Practical Operations"}),"\n",(0,t.jsx)(n.h3,{id:"31-configuring-offline-tts",children:"3.1 Configuring Offline TTS"}),"\n",(0,t.jsx)(n.p,{children:"To enable offline TTS, you need to correctly configure HemiHex.yaml and large_model_interface.yaml and ensure that the local model is correctly placed."}),"\n",(0,t.jsx)(n.p,{children:"Open the main configuration file :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"vim\r\n~/yahboom_ws/src/largemodel/config/HemiHex.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Modify/confirm the following key configurations:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"model_service\r\n:\r\n#Model server node parameters\r\nros__parameters\r\n:\r\nlanguage\r\n:\r\n'en'\r\n#Large Model Interface Language\r\nuseolinetts\r\n:\r\nFalse\r\n#Whether to use online speech synthesis (True to use online, False to use offline)\r\nregional_setting\r\n:\r\n\"international\"\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"model_service\r\n:\r\n#Model server node parameters\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"ros__parameters\r\n:\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"language\r\n:\r\n'en'\r\n#Large Model Interface Language\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"useolinetts\r\n:\r\nFalse\r\n#Whether to use online speech synthesis (True to use online, False to use offline)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'regional_setting\r\n:\r\n"international"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Make sure useolinetts is set to False to use the local model."}),"\n",(0,t.jsx)(n.p,{children:'Select "zh" for Chinese and "en" for English.'}),"\n",(0,t.jsx)(n.p,{children:"Open the model interface configuration file :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"vim\r\n~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"vim\r\n~/yahboom_ws/src/largemodel/config/large_model_interface.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Confirm offline model path :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# large_model_interface.yaml\r\n## \u79bb\u7ebf\u8bed\u97f3\u5408\u6210 (Offline TTS)\r\n\u200b\r\n# English TTS model\r\nen_tts_model\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/tts/en/en_US-libritts-high.onnx"\r\nen_tts_json\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/tts/en/en_US-libritts-high.onnx.json"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# large_model_interface.yaml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"## \u79bb\u7ebf\u8bed\u97f3\u5408\u6210 (Offline TTS)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\u200b\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# English TTS model\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'en_tts_model\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/tts/en/en_US-libritts-high.onnx"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'en_tts_json\r\n:\r\n"/home/jetson/yahboom_ws/src/largemodel/MODELS/tts/en/en_US-libritts-high.onnx.json"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"32-start-and-test-the-functionality",children:"3.2 Start and test the functionality"}),"\n",(0,t.jsx)(n.p,{children:"Start the TTS node : Run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"ros2 launch largemodel tts_only.launch.py\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"ros2 launch largemodel tts_only.launch.py\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20250807165129463",src:s(41291).A+"",width:"967",height:"160"})}),"\n",(0,t.jsx)(n.p,{children:"Send the text to be synthesized : Open a new terminal and run the following command to publish a voice message:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"ros2 topic pub\r\n--once\r\n/tts_text_input std_msgs/msg/String\r\n'{data: \"Speech synthesis test successful\"}'\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"ros2 topic pub\r\n--once\r\n/tts_text_input std_msgs/msg/String\r\n'{data: \"Speech synthesis test successful\"}'\n"})}),"\n",(0,t.jsx)(n.p,{children:'Test : If everything went well, you should hear the robot say "Speech synthesis test successful" in a synthesized voice through your speakers.'}),"\n",(0,t.jsx)(n.h2,{id:"4-common-problems-and-solutions",children:"4. Common Problems and Solutions"}),"\n",(0,t.jsx)(n.h3,{id:"41-playback-issues",children:"4.1 Playback Issues"}),"\n",(0,t.jsx)(n.h4,{id:"issue-1-the-program-runs-normally-without-errors-but-no-sound-is-heard",children:"Issue 1: The program runs normally without errors, but no sound is heard."}),"\n",(0,t.jsx)(n.p,{children:"Solution :"}),"\n",(0,t.jsx)(n.p,{children:"Check the audio output : Confirm that your system audio output device is selected correctly and the volume is not muted. Try playing a standard music file to test the hardware."}),"\n",(0,t.jsx)(n.p,{children:"In the Sound settings, set the Balance to the middle position."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20250807155119783",src:s(12598).A+"",width:"899",height:"751"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);