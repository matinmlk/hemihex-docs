"use strict";(globalThis.webpackChunkhemihex_docs=globalThis.webpackChunkhemihex_docs||[]).push([[1208],{6931:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"HH-101/ROS1/subscribers","title":"Subscribers","description":"5.1 Subscribers","source":"@site/docs/hh101/HH-101/09 - ROS1/05-subscribers.md","sourceDirName":"HH-101/09 - ROS1","slug":"/HH-101/ROS1/subscribers","permalink":"/hh-101/HH-101/ROS1/subscribers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Subscribers","sidebar_position":5},"sidebar":"hh101Sidebar","previous":{"title":"Publisher","permalink":"/hh-101/HH-101/ROS1/publisher"},"next":{"title":"Customized Topic Messages and Usage","permalink":"/hh-101/HH-101/ROS1/customized-topic-messages-and-usage"}}');var i=r(74848),t=r(28453);const c={title:"Subscribers",sidebar_position:5},a="5. Subscribers",o={},l=[{value:"5.1 Subscribers",id:"51-subscribers",level:2},{value:"5.2 Create a Subscriber",id:"52-create-a-subscriber",level:2},{value:"5.2.1 Creation Steps",id:"521-creation-steps",level:3},{value:"5.2.2 C++ Language Implementation",id:"522-c-language-implementation",level:2},{value:"5.2.3 Python Language Implementation",id:"523-python-language-implementation",level:2},{value:"Summary",id:"summary",level:2}];function u(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"5-subscribers",children:"5. Subscribers"})}),"\n",(0,i.jsx)(s.h2,{id:"51-subscribers",children:"5.1 Subscribers"}),"\n",(0,i.jsxs)(s.p,{children:["The subscriber receives the data published by the publisher and then enters its callback function, where the received data is processed. The core logic of a subscriber is the ",(0,i.jsx)(s.strong,{children:"callback function"}),", which is executed whenever a new message arrives on a subscribed topic."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"52-create-a-subscriber",children:"5.2 Create a Subscriber"}),"\n",(0,i.jsx)(s.h3,{id:"521-creation-steps",children:"5.2.1 Creation Steps"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Initialize the ROS node"}),"\n",(0,i.jsx)(s.li,{children:"Create a node handle"}),"\n",(0,i.jsx)(s.li,{children:"Subscribe to the required topic"}),"\n",(0,i.jsx)(s.li,{children:"Wait for topic messages in a loop, and upon receiving the message, enter the callback function"}),"\n",(0,i.jsx)(s.li,{children:"Complete message processing inside the callback function"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"522-c-language-implementation",children:"5.2.2 C++ Language Implementation"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"turtle_pose_subscriber.cpp\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-cpp",children:'#include <ros/ros.h>\r\n#include "turtlesim/Pose.h"\r\n\r\nvoid turtle_poseCallback(const turtlesim::Pose::ConstPtr& msg)\r\n{\r\n    ROS_INFO("Turtle pose: x:%0.3f, y:%0.3f", msg->x, msg->y);\r\n}\r\n\r\nint main(int argc, char **argv)\r\n{\r\n    ros::init(argc, argv, "turtle_pose_subscriber");\r\n    ros::NodeHandle n;\r\n\r\n    ros::Subscriber pose_sub = n.subscribe("/turtle1/pose", 10, turtle_poseCallback);\r\n\r\n    ros::spin();\r\n\r\n    return 0;\r\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"C++ Subscriber Flow",src:r(75442).A+"",width:"489",height:"606"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-cmake",children:"add_executable(turtle_pose_subscriber src/turtle_pose_subscriber.cpp)\r\ntarget_link_libraries(turtle_pose_subscriber ${catkin_LIBRARIES})\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cd ~/catkin_ws\r\ncatkin_make\r\nsource devel/setup.bash\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"roscore\r\nrosrun turtlesim turtlesim_node\r\nrosrun learning_topic turtle_pose_subscriber\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"C++ Subscriber Output",src:r(67729).A+"",width:"1040",height:"179"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"523-python-language-implementation",children:"5.2.3 Python Language Implementation"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"turtle_pose_subscriber.py\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"#!/usr/bin/env python\r\n# -*- coding: utf-8 -*-\r\n\r\nimport rospy\r\nfrom turtlesim.msg import Pose\r\n\r\ndef poseCallback(msg):\r\n    rospy.loginfo(\"Turtle pose: x:%0.3f, y:%0.3f\", msg.x, msg.y)\r\n\r\ndef turtle_pose_subscriber():\r\n    rospy.init_node('turtle_pose_subscriber', anonymous=True)\r\n    rospy.Subscriber(\"/turtle1/pose\", Pose, poseCallback)\r\n    rospy.spin()\r\n\r\nif __name__ == '__main__':\r\n    turtle_pose_subscriber()\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Python Subscriber Flow",src:r(81385).A+"",width:"432",height:"415"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"roscore\r\nrosrun turtlesim turtlesim_node\r\nrosrun learning_topic turtle_pose_subscriber\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(s.p,{children:["This section demonstrated how to implement ROS subscribers using both ",(0,i.jsx)(s.strong,{children:"C++"})," and ",(0,i.jsx)(s.strong,{children:"Python"}),", subscribe to the ",(0,i.jsx)(s.code,{children:"/turtle1/pose"})," topic, and continuously receive and process turtle pose data through callback functions."]})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>c,x:()=>a});var n=r(96540);const i={},t=n.createContext(i);function c(e){const s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(t.Provider,{value:s},e.children)}},67729:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/image-20220225102205852-bd763f539e673579e324cc9d8dcb57d0.png"},75442:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/sub_c++-48048fc9aa2c897a8b1a95a23423a986.jpg"},81385:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/image-20220225103401539-176a385421b817abd29bd5dcb6607b0f.png"}}]);